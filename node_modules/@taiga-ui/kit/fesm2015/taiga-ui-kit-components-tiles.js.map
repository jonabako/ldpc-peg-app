{"version":3,"file":"taiga-ui-kit-components-tiles.js","sources":["../../../projects/kit/components/tiles/tiles.component.ts","../../../projects/kit/components/tiles/tile.service.ts","../../../projects/kit/components/tiles/tile.component.ts","../../../projects/kit/components/tiles/tile.template.html","../../../projects/kit/components/tiles/tile-handle.directive.ts","../../../projects/kit/components/tiles/tiles.module.ts","../../../projects/kit/components/tiles/taiga-ui-kit-components-tiles.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    Output,\n    ViewEncapsulation,\n} from '@angular/core';\nimport {\n    MUTATION_OBSERVER_INIT,\n    MutationObserverService,\n} from '@ng-web-apis/mutation-observer';\nimport {TuiDestroyService, TuiResizeService} from '@taiga-ui/cdk';\nimport {BehaviorSubject, Subject, timer} from 'rxjs';\nimport {debounce, filter, map} from 'rxjs/operators';\n\n@Component({\n    selector: 'tui-tiles',\n    template: '<ng-content></ng-content>',\n    styleUrls: ['./tiles.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        TuiDestroyService,\n        TuiResizeService,\n        MutationObserverService,\n        {\n            provide: MUTATION_OBSERVER_INIT,\n            useValue: {childList: true},\n        },\n    ],\n})\nexport class TuiTilesComponent {\n    private readonly el$ = new Subject<Element | undefined>();\n\n    @Input()\n    debounce = 0;\n\n    @Input()\n    set order(map: Map<number, number>) {\n        this.order$.next(map);\n    }\n\n    get order(): Map<number, number> {\n        return this.order$.value;\n    }\n\n    @Output()\n    readonly orderChange = this.el$.pipe(\n        debounce(() => timer(this.debounce)),\n        filter(this.filter.bind(this)),\n        map(element => this.reorder(element)),\n    );\n\n    @HostBinding('class._dragged')\n    element: Element | null = null;\n\n    readonly order$ = new BehaviorSubject(new Map<number, number>());\n\n    constructor(@Inject(ElementRef) private readonly el: ElementRef<Element>) {}\n\n    @HostListener('pointerleave.silent')\n    rearrange(element?: Element): void {\n        this.el$.next(element);\n    }\n\n    private filter(element?: Element): element is Element {\n        return !!this.element && !!element && this.element !== element;\n    }\n\n    private reorder(element: Element): Map<number, number> {\n        const elements = Array.from(this.el.nativeElement.children);\n        const currentIndex = elements.indexOf(this.element || element);\n        const newIndex = elements.indexOf(element);\n        const order = this.order.size\n            ? new Map(this.order)\n            : new Map(elements.map((_, index) => [index, index]));\n        const dragged = order.get(currentIndex) ?? currentIndex;\n        const placement = order.get(newIndex) ?? newIndex;\n\n        order.set(currentIndex, placement);\n        order.set(newIndex, dragged);\n\n        this.order$.next(order);\n\n        return order;\n    }\n}\n","import {ElementRef, Inject, Injectable, OnDestroy} from '@angular/core';\nimport {MutationObserverService} from '@ng-web-apis/mutation-observer';\nimport {tuiArrayShallowEquals, tuiPx, TuiResizeService} from '@taiga-ui/cdk';\nimport {BehaviorSubject, combineLatest, Observable, Subscription} from 'rxjs';\nimport {debounceTime, distinctUntilChanged, map, startWith} from 'rxjs/operators';\n\nimport {TuiTilesComponent} from './tiles.component';\n\n@Injectable()\nexport class TuiTileService implements OnDestroy {\n    private readonly sub = new Subscription();\n\n    private readonly offset$ = new BehaviorSubject<readonly [number, number]>([NaN, NaN]);\n\n    private readonly position$: Observable<readonly [number, number]> = combineLatest([\n        this.offset$.pipe(distinctUntilChanged(tuiArrayShallowEquals)),\n        this.resize$.pipe(startWith(null)),\n        this.mutation$.pipe(startWith(null)),\n        this.tiles.order$.pipe(debounceTime(0)),\n    ]).pipe(map(([offset]) => offset));\n\n    constructor(\n        @Inject(ElementRef) private readonly el: ElementRef<HTMLElement>,\n        @Inject(TuiTilesComponent) private readonly tiles: TuiTilesComponent,\n        @Inject(TuiResizeService) private readonly resize$: Observable<unknown>,\n        @Inject(MutationObserverService) private readonly mutation$: Observable<unknown>,\n    ) {}\n\n    init(element: HTMLElement): void {\n        this.sub.add(\n            this.position$.subscribe(offset => {\n                this.setPosition(element, offset);\n                this.setRect(element, offset);\n            }),\n        );\n    }\n\n    setOffset(offset: readonly [number, number]): void {\n        this.offset$.next(offset);\n    }\n\n    ngOnDestroy(): void {\n        this.sub.unsubscribe();\n    }\n\n    private getRect([left, top]: readonly [number, number]): ClientRect {\n        return {\n            top: Number.isNaN(top) ? this.el.nativeElement.offsetTop : top,\n            left: Number.isNaN(left) ? this.el.nativeElement.offsetLeft : left,\n            width: this.el.nativeElement.clientWidth,\n            height: this.el.nativeElement.clientHeight,\n            right: NaN,\n            bottom: NaN,\n        };\n    }\n\n    private setRect({style}: HTMLElement, offset: readonly [number, number]): void {\n        const {top, left, width, height} = this.getRect(offset);\n\n        style.top = tuiPx(top);\n        style.left = tuiPx(left);\n        style.width = tuiPx(width);\n        style.height = tuiPx(height);\n    }\n\n    private setPosition(element: HTMLElement, [left]: readonly [number, number]): void {\n        if (!Number.isNaN(left)) {\n            element.style.setProperty('position', 'fixed');\n\n            return;\n        }\n\n        const {style} = element;\n        const rect = element.getBoundingClientRect();\n        const host = this.el.nativeElement.getBoundingClientRect();\n\n        style.removeProperty('position');\n        style.top = tuiPx(rect.top - host.top + this.el.nativeElement.offsetTop);\n        style.left = tuiPx(rect.left - host.left + this.el.nativeElement.offsetLeft);\n    }\n}\n","import {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    OnDestroy,\n    ViewChild,\n} from '@angular/core';\n\nimport {TuiTileService} from './tile.service';\nimport {TuiTilesComponent} from './tiles.component';\n\n@Component({\n    selector: 'tui-tile',\n    templateUrl: './tile.template.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiTileService],\n})\nexport class TuiTileComponent implements OnDestroy, AfterViewInit {\n    @ViewChild('wrapper')\n    private readonly wrapper?: ElementRef<HTMLElement>;\n\n    @Input()\n    width = 1;\n\n    @Input()\n    height = 1;\n\n    @HostBinding('class._dragged')\n    dragged = false;\n\n    constructor(\n        @Inject(TuiTileService) private readonly service: TuiTileService,\n        @Inject(ElementRef) private readonly el: ElementRef<HTMLElement>,\n        @Inject(TuiTilesComponent) private readonly tiles: TuiTilesComponent,\n    ) {}\n\n    @HostBinding('style.gridColumn')\n    get column(): string {\n        return `span var(--tui-width, ${this.width})`;\n    }\n\n    @HostBinding('style.gridRow')\n    get row(): string {\n        return `span var(--tui-height, ${this.height})`;\n    }\n\n    get element(): HTMLElement {\n        return this.el.nativeElement;\n    }\n\n    @HostListener('pointerenter')\n    onEnter(): void {\n        this.tiles.rearrange(this.element);\n    }\n\n    onDrag(offset: readonly [number, number]): void {\n        const dragged = !Number.isNaN(offset[0]);\n\n        this.dragged = this.dragged || dragged;\n        this.tiles.element = dragged ? this.element : null;\n        this.service.setOffset(offset);\n    }\n\n    onTransitionEnd(): void {\n        this.dragged = false;\n    }\n\n    ngAfterViewInit(): void {\n        if (this.wrapper) {\n            this.service.init(this.wrapper.nativeElement);\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.tiles.element === this.element) {\n            this.tiles.element = null;\n        }\n    }\n}\n","<div\n    #wrapper\n    class=\"t-wrapper\"\n    (transitionend.self)=\"onTransitionEnd()\"\n>\n    <ng-content></ng-content>\n</div>\n","import {Directive, HostListener, Inject} from '@angular/core';\nimport {tuiGetActualTarget, tuiIsElement} from '@taiga-ui/cdk';\nimport {shouldCall} from '@tinkoff/ng-event-plugins';\n\nimport {TuiTileComponent} from './tile.component';\n\nfunction isInteracting(this: TuiTileHandleDirective, x = NaN): boolean {\n    return !Number.isNaN(x) || !Number.isNaN(this['x']);\n}\n\nfunction isDragging(this: TuiTileHandleDirective): boolean {\n    return !Number.isNaN(this['x']);\n}\n\n@Directive({\n    selector: '[tuiTileHandle]',\n    host: {\n        '[style.touchAction]': '\"none\"',\n        '[style.userSelect]': '\"none\"',\n    },\n})\nexport class TuiTileHandleDirective {\n    private x = NaN;\n    private y = NaN;\n\n    constructor(@Inject(TuiTileComponent) private readonly tile: TuiTileComponent) {}\n\n    @HostListener('pointerdown.silent', ['$event'])\n    onStart(event: PointerEvent): void {\n        const target = tuiGetActualTarget(event);\n        const {x, y, pointerId} = event;\n\n        if (tuiIsElement(target)) {\n            target.releasePointerCapture(pointerId);\n        }\n\n        this.onPointer(x, y);\n    }\n\n    @shouldCall(isInteracting)\n    @HostListener('document:pointerup.silent')\n    onPointer(x = NaN, y = NaN): void {\n        const {left, top} = this.tile.element.getBoundingClientRect();\n\n        this.x = x - left;\n        this.y = y - top;\n        this.tile.onDrag([NaN, NaN]);\n    }\n\n    @shouldCall(isDragging)\n    @HostListener('document:pointermove.silent', ['$event.x', '$event.y'])\n    onMove(x: number, y: number): void {\n        this.tile.onDrag([x - this.x, y - this.y]);\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiTileComponent} from './tile.component';\nimport {TuiTileHandleDirective} from './tile-handle.directive';\nimport {TuiTilesComponent} from './tiles.component';\n\n@NgModule({\n    declarations: [TuiTilesComponent, TuiTileComponent, TuiTileHandleDirective],\n    exports: [TuiTilesComponent, TuiTileComponent, TuiTileHandleDirective],\n})\nexport class TuiTilesModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;;;MAmCa,iBAAiB,CAAA;AA2B1B,IAAA,WAAA,CAAiD,EAAuB,EAAA;QAAvB,IAAE,CAAA,EAAA,GAAF,EAAE,CAAqB;AA1BvD,QAAA,IAAA,CAAA,GAAG,GAAG,IAAI,OAAO,EAAuB,CAAC;QAG1D,IAAQ,CAAA,QAAA,GAAG,CAAC,CAAC;QAYJ,IAAW,CAAA,WAAA,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAChC,QAAQ,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EACpC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAC9B,GAAG,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CACxC,CAAC;QAGF,IAAO,CAAA,OAAA,GAAmB,IAAI,CAAC;QAEtB,IAAM,CAAA,MAAA,GAAG,IAAI,eAAe,CAAC,IAAI,GAAG,EAAkB,CAAC,CAAC;KAEW;IArB5E,IACI,KAAK,CAAC,GAAwB,EAAA;AAC9B,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACzB;AAED,IAAA,IAAI,KAAK,GAAA;AACL,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;KAC5B;AAiBD,IAAA,SAAS,CAAC,OAAiB,EAAA;AACvB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC1B;AAEO,IAAA,MAAM,CAAC,OAAiB,EAAA;AAC5B,QAAA,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC;KAClE;AAEO,IAAA,OAAO,CAAC,OAAgB,EAAA;;AAC5B,QAAA,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAC5D,QAAA,MAAM,YAAY,GAAG,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,CAAC;QAC/D,MAAM,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC3C,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI;AACzB,cAAE,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;cACnB,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC1D,MAAM,OAAO,GAAG,CAAA,EAAA,GAAA,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,MAAI,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,YAAY,CAAC;QACxD,MAAM,SAAS,GAAG,CAAA,EAAA,GAAA,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAI,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,QAAQ,CAAC;AAElD,QAAA,KAAK,CAAC,GAAG,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;AACnC,QAAA,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AAE7B,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAExB,QAAA,OAAO,KAAK,CAAC;KAChB;;AAtDQ,iBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,iBAAiB,kBA2BN,UAAU,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AA3BrB,iBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,iBAAiB,EAVf,QAAA,EAAA,WAAA,EAAA,MAAA,EAAA,EAAA,QAAA,EAAA,UAAA,EAAA,KAAA,EAAA,OAAA,EAAA,EAAA,OAAA,EAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,IAAA,EAAA,EAAA,SAAA,EAAA,EAAA,qBAAA,EAAA,aAAA,EAAA,EAAA,UAAA,EAAA,EAAA,gBAAA,EAAA,cAAA,EAAA,EAAA,EAAA,SAAA,EAAA;QACP,iBAAiB;QACjB,gBAAgB;QAChB,uBAAuB;AACvB,QAAA;AACI,YAAA,OAAO,EAAE,sBAAsB;AAC/B,YAAA,QAAQ,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC;AAC9B,SAAA;AACJ,KAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAZS,2BAA2B,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,CAAA,woBAAA,CAAA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA,CAAA;4FAc5B,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAhB7B,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,WAAW;AACrB,oBAAA,QAAQ,EAAE,2BAA2B;oBACrC,SAAS,EAAE,CAAC,oBAAoB,CAAC;oBACjC,aAAa,EAAE,iBAAiB,CAAC,IAAI;oBACrC,eAAe,EAAE,uBAAuB,CAAC,MAAM;AAC/C,oBAAA,SAAS,EAAE;wBACP,iBAAiB;wBACjB,gBAAgB;wBAChB,uBAAuB;AACvB,wBAAA;AACI,4BAAA,OAAO,EAAE,sBAAsB;AAC/B,4BAAA,QAAQ,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC;AAC9B,yBAAA;AACJ,qBAAA;AACJ,iBAAA,CAAA;;0BA4BgB,MAAM;2BAAC,UAAU,CAAA;4CAvB9B,QAAQ,EAAA,CAAA;sBADP,KAAK;gBAIF,KAAK,EAAA,CAAA;sBADR,KAAK;gBAUG,WAAW,EAAA,CAAA;sBADnB,MAAM;gBAQP,OAAO,EAAA,CAAA;sBADN,WAAW;uBAAC,gBAAgB,CAAA;gBAQ7B,SAAS,EAAA,CAAA;sBADR,YAAY;uBAAC,qBAAqB,CAAA;;;MCvD1B,cAAc,CAAA;AAYvB,IAAA,WAAA,CACyC,EAA2B,EACpB,KAAwB,EACzB,OAA4B,EACrB,SAA8B,EAAA;QAH3C,IAAE,CAAA,EAAA,GAAF,EAAE,CAAyB;QACpB,IAAK,CAAA,KAAA,GAAL,KAAK,CAAmB;QACzB,IAAO,CAAA,OAAA,GAAP,OAAO,CAAqB;QACrB,IAAS,CAAA,SAAA,GAAT,SAAS,CAAqB;AAfnE,QAAA,IAAA,CAAA,GAAG,GAAG,IAAI,YAAY,EAAE,CAAC;QAEzB,IAAO,CAAA,OAAA,GAAG,IAAI,eAAe,CAA4B,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QAErE,IAAS,CAAA,SAAA,GAA0C,aAAa,CAAC;YAC9E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,CAAC;YAC9D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAClC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AAC1C,SAAA,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC;KAO/B;AAEJ,IAAA,IAAI,CAAC,OAAoB,EAAA;AACrB,QAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CACR,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,IAAG;AAC9B,YAAA,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAClC,YAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;SACjC,CAAC,CACL,CAAC;KACL;AAED,IAAA,SAAS,CAAC,MAAiC,EAAA;AACvC,QAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC7B;IAED,WAAW,GAAA;AACP,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;KAC1B;AAEO,IAAA,OAAO,CAAC,CAAC,IAAI,EAAE,GAAG,CAA4B,EAAA;QAClD,OAAO;YACH,GAAG,EAAE,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,SAAS,GAAG,GAAG;YAC9D,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,UAAU,GAAG,IAAI;AAClE,YAAA,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,WAAW;AACxC,YAAA,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,YAAY;AAC1C,YAAA,KAAK,EAAE,GAAG;AACV,YAAA,MAAM,EAAE,GAAG;SACd,CAAC;KACL;AAEO,IAAA,OAAO,CAAC,EAAC,KAAK,EAAc,EAAE,MAAiC,EAAA;AACnE,QAAA,MAAM,EAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAExD,QAAA,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;AACvB,QAAA,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;AACzB,QAAA,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;AAC3B,QAAA,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;KAChC;AAEO,IAAA,WAAW,CAAC,OAAoB,EAAE,CAAC,IAAI,CAA4B,EAAA;AACvE,QAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;YACrB,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;YAE/C,OAAO;AACV,SAAA;AAED,QAAA,MAAM,EAAC,KAAK,EAAC,GAAG,OAAO,CAAC;AACxB,QAAA,MAAM,IAAI,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;QAC7C,MAAM,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;AAE3D,QAAA,KAAK,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QACjC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QACzE,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;KAChF;;AAtEQ,cAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,cAAc,kBAaX,UAAU,EAAA,EAAA,EAAA,KAAA,EACV,iBAAiB,EACjB,EAAA,EAAA,KAAA,EAAA,gBAAgB,aAChB,uBAAuB,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA;gHAhB1B,cAAc,EAAA,CAAA,CAAA;4FAAd,cAAc,EAAA,UAAA,EAAA,CAAA;kBAD1B,UAAU;;0BAcF,MAAM;2BAAC,UAAU,CAAA;;0BACjB,MAAM;2BAAC,iBAAiB,CAAA;;0BACxB,MAAM;2BAAC,gBAAgB,CAAA;;0BACvB,MAAM;2BAAC,uBAAuB,CAAA;;;MCH1B,gBAAgB,CAAA;AAazB,IAAA,WAAA,CAC6C,OAAuB,EAC3B,EAA2B,EACpB,KAAwB,EAAA;QAF3B,IAAO,CAAA,OAAA,GAAP,OAAO,CAAgB;QAC3B,IAAE,CAAA,EAAA,GAAF,EAAE,CAAyB;QACpB,IAAK,CAAA,KAAA,GAAL,KAAK,CAAmB;QAXxE,IAAK,CAAA,KAAA,GAAG,CAAC,CAAC;QAGV,IAAM,CAAA,MAAA,GAAG,CAAC,CAAC;QAGX,IAAO,CAAA,OAAA,GAAG,KAAK,CAAC;KAMZ;AAEJ,IAAA,IACI,MAAM,GAAA;AACN,QAAA,OAAO,CAAyB,sBAAA,EAAA,IAAI,CAAC,KAAK,GAAG,CAAC;KACjD;AAED,IAAA,IACI,GAAG,GAAA;AACH,QAAA,OAAO,CAA0B,uBAAA,EAAA,IAAI,CAAC,MAAM,GAAG,CAAC;KACnD;AAED,IAAA,IAAI,OAAO,GAAA;AACP,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;KAChC;IAGD,OAAO,GAAA;QACH,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KACtC;AAED,IAAA,MAAM,CAAC,MAAiC,EAAA;AACpC,QAAA,MAAM,OAAO,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAEzC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC;AACvC,QAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACnD,QAAA,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;KAClC;IAED,eAAe,GAAA;AACX,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACxB;IAED,eAAe,GAAA;QACX,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;AACjD,SAAA;KACJ;IAED,WAAW,GAAA;QACP,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,EAAE;AACrC,YAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;AAC7B,SAAA;KACJ;;AA5DQ,gBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,gBAAgB,EAcb,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,cAAc,EACd,EAAA,EAAA,KAAA,EAAA,UAAU,aACV,iBAAiB,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAhBpB,gBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,gBAAgB,EAFd,QAAA,EAAA,UAAA,EAAA,MAAA,EAAA,EAAA,KAAA,EAAA,OAAA,EAAA,MAAA,EAAA,QAAA,EAAA,EAAA,IAAA,EAAA,EAAA,SAAA,EAAA,EAAA,cAAA,EAAA,WAAA,EAAA,EAAA,UAAA,EAAA,EAAA,gBAAA,EAAA,cAAA,EAAA,kBAAA,EAAA,aAAA,EAAA,eAAA,EAAA,UAAA,EAAA,EAAA,EAAA,SAAA,EAAA,CAAC,cAAc,CAAC,8HCpB/B,yIAOA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA;4FDea,gBAAgB,EAAA,UAAA,EAAA,CAAA;kBAN5B,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,UAAU;AACpB,oBAAA,WAAW,EAAE,sBAAsB;oBACnC,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAC/C,SAAS,EAAE,CAAC,cAAc,CAAC;AAC9B,iBAAA,CAAA;;0BAeQ,MAAM;2BAAC,cAAc,CAAA;;0BACrB,MAAM;2BAAC,UAAU,CAAA;;0BACjB,MAAM;2BAAC,iBAAiB,CAAA;4CAdZ,OAAO,EAAA,CAAA;sBADvB,SAAS;uBAAC,SAAS,CAAA;gBAIpB,KAAK,EAAA,CAAA;sBADJ,KAAK;gBAIN,MAAM,EAAA,CAAA;sBADL,KAAK;gBAIN,OAAO,EAAA,CAAA;sBADN,WAAW;uBAAC,gBAAgB,CAAA;gBAUzB,MAAM,EAAA,CAAA;sBADT,WAAW;uBAAC,kBAAkB,CAAA;gBAM3B,GAAG,EAAA,CAAA;sBADN,WAAW;uBAAC,eAAe,CAAA;gBAU5B,OAAO,EAAA,CAAA;sBADN,YAAY;uBAAC,cAAc,CAAA;;;AEjDhC,SAAS,aAAa,CAA+B,CAAC,GAAG,GAAG,EAAA;AACxD,IAAA,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACxD,CAAC;AAED,SAAS,UAAU,GAAA;IACf,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACpC,CAAC;MASY,sBAAsB,CAAA;AAI/B,IAAA,WAAA,CAAuD,IAAsB,EAAA;QAAtB,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAkB;QAHrE,IAAC,CAAA,CAAA,GAAG,GAAG,CAAC;QACR,IAAC,CAAA,CAAA,GAAG,GAAG,CAAC;KAEiE;AAGjF,IAAA,OAAO,CAAC,KAAmB,EAAA;AACvB,QAAA,MAAM,MAAM,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACzC,MAAM,EAAC,CAAC,EAAE,CAAC,EAAE,SAAS,EAAC,GAAG,KAAK,CAAC;AAEhC,QAAA,IAAI,YAAY,CAAC,MAAM,CAAC,EAAE;AACtB,YAAA,MAAM,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;AAC3C,SAAA;AAED,QAAA,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACxB;AAID,IAAA,SAAS,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,EAAA;AACtB,QAAA,MAAM,EAAC,IAAI,EAAE,GAAG,EAAC,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;AAE9D,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;AAClB,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;KAChC;IAID,MAAM,CAAC,CAAS,EAAE,CAAS,EAAA;AACvB,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KAC9C;;AAhCQ,sBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,sBAAsB,kBAIX,gBAAgB,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;wGAJ3B,sBAAsB,EAAA,QAAA,EAAA,iBAAA,EAAA,IAAA,EAAA,EAAA,SAAA,EAAA,EAAA,oBAAA,EAAA,iBAAA,EAAA,2BAAA,EAAA,aAAA,EAAA,6BAAA,EAAA,2BAAA,EAAA,EAAA,UAAA,EAAA,EAAA,mBAAA,EAAA,UAAA,EAAA,kBAAA,EAAA,UAAA,EAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;AAoB/B,UAAA,CAAA;IAFC,UAAU,CAAC,aAAa,CAAC;AAQzB,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,WAAA,EAAA,IAAA,CAAA,CAAA;AAID,UAAA,CAAA;IAFC,UAAU,CAAC,UAAU,CAAC;AAItB,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,QAAA,EAAA,IAAA,CAAA,CAAA;4FAhCQ,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBAPlC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,iBAAiB;AAC3B,oBAAA,IAAI,EAAE;AACF,wBAAA,qBAAqB,EAAE,QAAQ;AAC/B,wBAAA,oBAAoB,EAAE,QAAQ;AACjC,qBAAA;AACJ,iBAAA,CAAA;;0BAKgB,MAAM;2BAAC,gBAAgB,CAAA;4CAGpC,OAAO,EAAA,CAAA;sBADN,YAAY;uBAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC,CAAA;gBAc9C,SAAS,EAAA,CAAA;sBADR,YAAY;uBAAC,2BAA2B,CAAA;gBAWzC,MAAM,EAAA,CAAA;sBADL,YAAY;AAAC,gBAAA,IAAA,EAAA,CAAA,6BAA6B,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,CAAA;;;MCxC5D,cAAc,CAAA;;4GAAd,cAAc,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;6GAAd,cAAc,EAAA,YAAA,EAAA,CAHR,iBAAiB,EAAE,gBAAgB,EAAE,sBAAsB,CAAA,EAAA,OAAA,EAAA,CAChE,iBAAiB,EAAE,gBAAgB,EAAE,sBAAsB,CAAA,EAAA,CAAA,CAAA;6GAE5D,cAAc,EAAA,CAAA,CAAA;4FAAd,cAAc,EAAA,UAAA,EAAA,CAAA;kBAJ1B,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACN,oBAAA,YAAY,EAAE,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,sBAAsB,CAAC;AAC3E,oBAAA,OAAO,EAAE,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,sBAAsB,CAAC;AACzE,iBAAA,CAAA;;;ACTD;;AAEG;;;;"}