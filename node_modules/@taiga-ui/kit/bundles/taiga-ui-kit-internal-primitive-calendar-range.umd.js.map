{"version":3,"file":"taiga-ui-kit-internal-primitive-calendar-range.umd.js","sources":["../../../projects/kit/internal/primitive-calendar-range/primitive-calendar-range.component.ts","../../../projects/kit/internal/primitive-calendar-range/primitive-calendar-range.template.html","../../../projects/kit/internal/primitive-calendar-range/primitive-calendar-range.module.ts","../../../projects/kit/internal/primitive-calendar-range/taiga-ui-kit-internal-primitive-calendar-range.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    EventEmitter,\n    Inject,\n    Input,\n    OnInit,\n    Optional,\n    Output,\n    Self,\n} from '@angular/core';\nimport {\n    ALWAYS_FALSE_HANDLER,\n    TUI_FIRST_DAY,\n    TUI_LAST_DAY,\n    TuiBooleanHandler,\n    TuiDay,\n    TuiDayRange,\n    TuiDestroyService,\n    TuiMonth,\n    TuiTypedMapper,\n    tuiWatch,\n} from '@taiga-ui/cdk';\nimport {TUI_DEFAULT_MARKER_HANDLER, TuiMarkerHandler} from '@taiga-ui/core';\nimport {TUI_CALENDAR_DATE_STREAM} from '@taiga-ui/kit/tokens';\nimport {Observable} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\n/**\n * @internal\n */\n@Component({\n    selector: 'tui-primitive-calendar-range',\n    templateUrl: './primitive-calendar-range.template.html',\n    styleUrls: ['./primitive-calendar-range.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService],\n})\nexport class TuiPrimitiveCalendarRangeComponent implements OnInit {\n    @Input()\n    disabledItemHandler: TuiBooleanHandler<TuiDay> = ALWAYS_FALSE_HANDLER;\n\n    @Input()\n    markerHandler: TuiMarkerHandler = TUI_DEFAULT_MARKER_HANDLER;\n\n    @Input()\n    defaultViewedMonthFirst = TuiMonth.currentLocal();\n\n    @Input()\n    defaultViewedMonthSecond = TuiMonth.currentLocal().append({month: 1});\n\n    @Input()\n    min = TUI_FIRST_DAY;\n\n    @Input()\n    max = TUI_LAST_DAY;\n\n    @Input()\n    value: TuiDayRange | null = null;\n\n    @Output()\n    readonly dayClick = new EventEmitter<TuiDay>();\n\n    hoveredItem: TuiDay | null = null;\n\n    userViewedMonthFirst: TuiMonth = this.defaultViewedMonthFirst;\n    userViewedMonthSecond: TuiMonth = this.defaultViewedMonthSecond;\n\n    constructor(\n        @Inject(TUI_CALENDAR_DATE_STREAM)\n        @Optional()\n        valueChanges: Observable<TuiDayRange | null> | null,\n        @Inject(ChangeDetectorRef) cdr: ChangeDetectorRef,\n        @Self() @Inject(TuiDestroyService) destroy$: TuiDestroyService,\n    ) {\n        if (!valueChanges) {\n            return;\n        }\n\n        valueChanges.pipe(tuiWatch(cdr), takeUntil(destroy$)).subscribe(value => {\n            this.value = value;\n            this.updateViewedMonths();\n        });\n    }\n\n    get cappedUserViewedMonthSecond(): TuiMonth {\n        return this.userViewedMonthSecond.monthBefore(this.max)\n            ? this.userViewedMonthSecond\n            : this.max;\n    }\n\n    get cappedUserViewedMonthFirst(): TuiMonth {\n        return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)\n            ? this.userViewedMonthFirst\n            : this.userViewedMonthSecond;\n    }\n\n    monthOffset: TuiTypedMapper<[TuiMonth, number], TuiMonth> = (value, offset) =>\n        value.append({month: offset});\n\n    ngOnInit(): void {\n        this.setInitialMonths();\n    }\n\n    onSectionFirstViewedMonth(month: TuiMonth): void {\n        this.userViewedMonthFirst = month;\n\n        this.userViewedMonthSecond = this.userViewedMonthFirst.append({month: 1});\n    }\n\n    onSectionSecondViewedMonth(month: TuiMonth): void {\n        this.userViewedMonthSecond = month;\n\n        this.userViewedMonthFirst = this.userViewedMonthSecond.append({\n            month: -1,\n        });\n    }\n\n    onDayClick(day: TuiDay): void {\n        this.dayClick.emit(day);\n    }\n\n    private setInitialMonths(): void {\n        if (!this.value) {\n            this.userViewedMonthSecond = this.updatedViewedMonthSecond(\n                this.defaultViewedMonthSecond,\n            );\n\n            this.userViewedMonthFirst = this.updatedViewedMonthFirst(\n                this.defaultViewedMonthFirst,\n            );\n        }\n    }\n\n    private updatedViewedMonthSecond(month: TuiMonth): TuiMonth {\n        if (month.monthSameOrAfter(this.max)) {\n            return this.max;\n        }\n\n        if (month.monthBefore(this.min)) {\n            return this.min.append({month: 1});\n        }\n\n        return month;\n    }\n\n    private updatedViewedMonthFirst(month: TuiMonth): TuiMonth {\n        if (month.monthSameOrAfter(this.userViewedMonthSecond)) {\n            return this.userViewedMonthSecond.append({month: -1});\n        }\n\n        if (month.monthSameOrBefore(this.min)) {\n            return this.min;\n        }\n\n        return month;\n    }\n\n    private updateViewedMonths(): void {\n        this.userViewedMonthFirst =\n            this.value === null ? this.defaultViewedMonthFirst : this.value.from;\n\n        this.userViewedMonthSecond = this.userViewedMonthFirst.append({month: 1});\n    }\n}\n","<tui-calendar\n    [disabledItemHandler]=\"disabledItemHandler\"\n    [markerHandler]=\"markerHandler\"\n    [max]=\"max\"\n    [maxViewedMonth]=\"cappedUserViewedMonthSecond | tuiMapper: monthOffset : -1\"\n    [min]=\"min\"\n    [month]=\"userViewedMonthFirst\"\n    [showAdjacent]=\"false\"\n    [value]=\"value\"\n    [(hoveredItem)]=\"hoveredItem\"\n    (dayClick)=\"onDayClick($event)\"\n    (monthChange)=\"onSectionFirstViewedMonth($event)\"\n></tui-calendar>\n<tui-calendar\n    class=\"t-border\"\n    [disabledItemHandler]=\"disabledItemHandler\"\n    [markerHandler]=\"markerHandler\"\n    [max]=\"max\"\n    [min]=\"min\"\n    [minViewedMonth]=\"cappedUserViewedMonthFirst | tuiMapper: monthOffset : 1\"\n    [month]=\"userViewedMonthSecond.monthSameOrBefore(min) ? (min | tuiMapper: monthOffset : 1) : userViewedMonthSecond\"\n    [showAdjacent]=\"false\"\n    [value]=\"value\"\n    [(hoveredItem)]=\"hoveredItem\"\n    (dayClick)=\"onDayClick($event)\"\n    (monthChange)=\"onSectionSecondViewedMonth($event)\"\n></tui-calendar>\n","import {NgModule} from '@angular/core';\nimport {TuiMapperPipeModule} from '@taiga-ui/cdk';\nimport {TuiCalendarModule, TuiScrollbarModule} from '@taiga-ui/core';\n\nimport {TuiPrimitiveCalendarRangeComponent} from './primitive-calendar-range.component';\n\n/**\n * @internal\n */\n@NgModule({\n    imports: [TuiMapperPipeModule, TuiScrollbarModule, TuiCalendarModule],\n    declarations: [TuiPrimitiveCalendarRangeComponent],\n    exports: [TuiPrimitiveCalendarRangeComponent],\n})\nexport class TuiPrimitiveCalendarRangeModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["ALWAYS_FALSE_HANDLER","TUI_DEFAULT_MARKER_HANDLER","TuiMonth","TUI_FIRST_DAY","TUI_LAST_DAY","EventEmitter","tuiWatch","takeUntil","i0","TUI_CALENDAR_DATE_STREAM","ChangeDetectorRef","TuiDestroyService","i1","i2","Component","ChangeDetectionStrategy","Inject","Optional","Self","Input","Output","TuiMapperPipeModule","TuiScrollbarModule","TuiCalendarModule","NgModule"],"mappings":"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"}