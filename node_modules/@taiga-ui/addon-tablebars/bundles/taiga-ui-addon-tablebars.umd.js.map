{"version":3,"file":"taiga-ui-addon-tablebars.umd.js","sources":["../../../projects/addon-tablebars/classes/table-bar.ts","../../../projects/addon-tablebars/services/table-bars.service.ts","../../../projects/addon-tablebars/components/table-bars-host/table-bars-host.component.ts","../../../projects/addon-tablebars/components/table-bars-host/table-bars-host.template.html","../../../projects/addon-tablebars/components/table-bars-host/table-bars-host.module.ts","../../../projects/addon-tablebars/taiga-ui-addon-tablebars.ts"],"sourcesContent":["import {TuiBrightness} from '@taiga-ui/core';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observer} from 'rxjs';\n\nimport {TuiTableBarOptions} from '../interfaces/table-bar-options';\n\nexport class TuiTableBar {\n    readonly adaptive: boolean;\n\n    readonly hasCloseButton: boolean;\n\n    readonly mode: TuiBrightness;\n\n    constructor(\n        private readonly observer: Observer<never>,\n        readonly content: PolymorpheusContent<Record<string, any>>,\n        options: TuiTableBarOptions = {},\n    ) {\n        const {mode = 'onLight', hasCloseButton = false, adaptive = false} = options;\n\n        this.mode = mode;\n        this.hasCloseButton = hasCloseButton;\n        this.adaptive = adaptive;\n    }\n\n    close(): void {\n        this.observer.complete();\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {tuiAssert, tuiIsObserved} from '@taiga-ui/cdk';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable, ReplaySubject} from 'rxjs';\n\nimport {TuiTableBar} from '../classes/table-bar';\nimport {TuiTableBarOptions} from '../interfaces/table-bar-options';\n\nconst NO_HOST =\n    'Table bars are disabled, enable support by adding TuiTableBarsHostModule to your main app module ' +\n    'and tui-table-bars-host component to app template';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class TuiTableBarsService {\n    readonly bar$ = new ReplaySubject<TuiTableBar | null>(1);\n\n    open(content: PolymorpheusContent, options?: TuiTableBarOptions): Observable<never> {\n        return new Observable(observer => {\n            ngDevMode && tuiAssert.assert(tuiIsObserved(this.bar$), NO_HOST);\n\n            const tableBar = new TuiTableBar(observer, content, options);\n\n            this.bar$.next(tableBar);\n\n            return () => {\n                this.bar$.next(null);\n            };\n        });\n    }\n}\n","import {AnimationOptions} from '@angular/animations';\nimport {ChangeDetectionStrategy, Component, Inject} from '@angular/core';\nimport {WINDOW} from '@ng-web-apis/common';\nimport {TUI_PARENT_ANIMATION, TuiContextWithImplicit} from '@taiga-ui/cdk';\nimport {\n    TUI_ANIMATION_OPTIONS,\n    TUI_CLOSE_WORD,\n    TUI_COMMON_ICONS,\n    TUI_MEDIA,\n    TuiBrightness,\n    TuiCommonIcons,\n    tuiIsMobile,\n    TuiMedia,\n    tuiSlideInTop,\n} from '@taiga-ui/core';\nimport {Observable} from 'rxjs';\n\nimport {TuiTableBar} from '../../classes/table-bar';\nimport {TuiTableBarsService} from '../../services/table-bars.service';\n\n// TODO: Accessibility\n@Component({\n    selector: 'tui-table-bars-host',\n    templateUrl: './table-bars-host.template.html',\n    styleUrls: ['./table-bars-host.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    animations: [tuiSlideInTop, TUI_PARENT_ANIMATION],\n})\nexport class TuiTableBarsHostComponent {\n    constructor(\n        @Inject(TuiTableBarsService) readonly service: TuiTableBarsService,\n        @Inject(TUI_CLOSE_WORD) readonly closeWord$: Observable<string>,\n        @Inject(TUI_COMMON_ICONS) readonly icons: TuiCommonIcons,\n        @Inject(TUI_ANIMATION_OPTIONS) readonly animation: AnimationOptions,\n        @Inject(TUI_MEDIA) private readonly media: TuiMedia,\n        @Inject(WINDOW) private readonly win: Window,\n    ) {}\n\n    get isMobile(): boolean {\n        return tuiIsMobile(this.win, this.media);\n    }\n\n    getMode(mode: TuiBrightness): TuiBrightness | null {\n        return mode === 'onLight' ? 'onDark' : null;\n    }\n\n    onCloseClick(itemToRemove: TuiTableBar): void {\n        itemToRemove.close();\n    }\n\n    getItemContext(item: TuiTableBar): TuiContextWithImplicit<() => void> {\n        return {\n            $implicit: () => item.close(),\n        };\n    }\n}\n","<div\n    *ngIf=\"service.bar$ | async as item\"\n    class=\"t-wrapper\"\n    @tuiParentAnimation\n>\n    <div\n        automation-id=\"tui-table-bar__bar\"\n        class=\"t-bar\"\n        [@tuiSlideInTop]=\"animation\"\n        [class.t-bar_light]=\"item.mode === 'onDark'\"\n    >\n        <div\n            class=\"t-container\"\n            [class.t-container_adaptive]=\"item.adaptive\"\n        >\n            <div class=\"t-inner\">\n                <div class=\"t-content\">\n                    <!-- TODO: Polymorpheus fix type -->\n                    <ng-container *polymorpheusOutlet=\"$any(item.content) as text; context: getItemContext(item)\">\n                        {{ text }}\n                    </ng-container>\n                </div>\n\n                <button\n                    *ngIf=\"item.hasCloseButton\"\n                    appearance=\"icon\"\n                    automation-id=\"tui-table-bar__close-button\"\n                    size=\"xs\"\n                    tuiIconButton\n                    type=\"button\"\n                    class=\"t-close-button\"\n                    [icon]=\"icons.close\"\n                    [title]=\"closeWord$ | async\"\n                    [tuiMode]=\"getMode(item.mode)\"\n                    (click)=\"onCloseClick(item)\"\n                ></button>\n            </div>\n        </div>\n    </div>\n</div>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiButtonModule, TuiModeModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiTableBarsHostComponent} from './table-bars-host.component';\n\n@NgModule({\n    imports: [CommonModule, PolymorpheusModule, TuiModeModule, TuiButtonModule],\n    declarations: [TuiTableBarsHostComponent],\n    exports: [TuiTableBarsHostComponent],\n})\nexport class TuiTableBarsHostModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["ReplaySubject","Observable","tuiAssert","tuiIsObserved","i0","Injectable","tuiIsMobile","TUI_CLOSE_WORD","TUI_COMMON_ICONS","TUI_ANIMATION_OPTIONS","TUI_MEDIA","WINDOW","i1","i2","i3","tuiSlideInTop","TUI_PARENT_ANIMATION","Component","ChangeDetectionStrategy","Inject","CommonModule","PolymorpheusModule","TuiModeModule","TuiButtonModule","NgModule"],"mappings":"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"}