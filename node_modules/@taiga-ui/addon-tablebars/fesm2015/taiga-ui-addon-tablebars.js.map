{"version":3,"file":"taiga-ui-addon-tablebars.js","sources":["../../../projects/addon-tablebars/classes/table-bar.ts","../../../projects/addon-tablebars/services/table-bars.service.ts","../../../projects/addon-tablebars/components/table-bars-host/table-bars-host.component.ts","../../../projects/addon-tablebars/components/table-bars-host/table-bars-host.template.html","../../../projects/addon-tablebars/components/table-bars-host/table-bars-host.module.ts","../../../projects/addon-tablebars/taiga-ui-addon-tablebars.ts"],"sourcesContent":["import {TuiBrightness} from '@taiga-ui/core';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observer} from 'rxjs';\n\nimport {TuiTableBarOptions} from '../interfaces/table-bar-options';\n\nexport class TuiTableBar {\n    readonly adaptive: boolean;\n\n    readonly hasCloseButton: boolean;\n\n    readonly mode: TuiBrightness;\n\n    constructor(\n        private readonly observer: Observer<never>,\n        readonly content: PolymorpheusContent<Record<string, any>>,\n        options: TuiTableBarOptions = {},\n    ) {\n        const {mode = 'onLight', hasCloseButton = false, adaptive = false} = options;\n\n        this.mode = mode;\n        this.hasCloseButton = hasCloseButton;\n        this.adaptive = adaptive;\n    }\n\n    close(): void {\n        this.observer.complete();\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {tuiAssert, tuiIsObserved} from '@taiga-ui/cdk';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable, ReplaySubject} from 'rxjs';\n\nimport {TuiTableBar} from '../classes/table-bar';\nimport {TuiTableBarOptions} from '../interfaces/table-bar-options';\n\nconst NO_HOST =\n    'Table bars are disabled, enable support by adding TuiTableBarsHostModule to your main app module ' +\n    'and tui-table-bars-host component to app template';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class TuiTableBarsService {\n    readonly bar$ = new ReplaySubject<TuiTableBar | null>(1);\n\n    open(content: PolymorpheusContent, options?: TuiTableBarOptions): Observable<never> {\n        return new Observable(observer => {\n            ngDevMode && tuiAssert.assert(tuiIsObserved(this.bar$), NO_HOST);\n\n            const tableBar = new TuiTableBar(observer, content, options);\n\n            this.bar$.next(tableBar);\n\n            return () => {\n                this.bar$.next(null);\n            };\n        });\n    }\n}\n","import {AnimationOptions} from '@angular/animations';\nimport {ChangeDetectionStrategy, Component, Inject} from '@angular/core';\nimport {WINDOW} from '@ng-web-apis/common';\nimport {TUI_PARENT_ANIMATION, TuiContextWithImplicit} from '@taiga-ui/cdk';\nimport {\n    TUI_ANIMATION_OPTIONS,\n    TUI_CLOSE_WORD,\n    TUI_COMMON_ICONS,\n    TUI_MEDIA,\n    TuiBrightness,\n    TuiCommonIcons,\n    tuiIsMobile,\n    TuiMedia,\n    tuiSlideInTop,\n} from '@taiga-ui/core';\nimport {Observable} from 'rxjs';\n\nimport {TuiTableBar} from '../../classes/table-bar';\nimport {TuiTableBarsService} from '../../services/table-bars.service';\n\n// TODO: Accessibility\n@Component({\n    selector: 'tui-table-bars-host',\n    templateUrl: './table-bars-host.template.html',\n    styleUrls: ['./table-bars-host.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    animations: [tuiSlideInTop, TUI_PARENT_ANIMATION],\n})\nexport class TuiTableBarsHostComponent {\n    constructor(\n        @Inject(TuiTableBarsService) readonly service: TuiTableBarsService,\n        @Inject(TUI_CLOSE_WORD) readonly closeWord$: Observable<string>,\n        @Inject(TUI_COMMON_ICONS) readonly icons: TuiCommonIcons,\n        @Inject(TUI_ANIMATION_OPTIONS) readonly animation: AnimationOptions,\n        @Inject(TUI_MEDIA) private readonly media: TuiMedia,\n        @Inject(WINDOW) private readonly win: Window,\n    ) {}\n\n    get isMobile(): boolean {\n        return tuiIsMobile(this.win, this.media);\n    }\n\n    getMode(mode: TuiBrightness): TuiBrightness | null {\n        return mode === 'onLight' ? 'onDark' : null;\n    }\n\n    onCloseClick(itemToRemove: TuiTableBar): void {\n        itemToRemove.close();\n    }\n\n    getItemContext(item: TuiTableBar): TuiContextWithImplicit<() => void> {\n        return {\n            $implicit: () => item.close(),\n        };\n    }\n}\n","<div\n    *ngIf=\"service.bar$ | async as item\"\n    class=\"t-wrapper\"\n    @tuiParentAnimation\n>\n    <div\n        automation-id=\"tui-table-bar__bar\"\n        class=\"t-bar\"\n        [@tuiSlideInTop]=\"animation\"\n        [class.t-bar_light]=\"item.mode === 'onDark'\"\n    >\n        <div\n            class=\"t-container\"\n            [class.t-container_adaptive]=\"item.adaptive\"\n        >\n            <div class=\"t-inner\">\n                <div class=\"t-content\">\n                    <!-- TODO: Polymorpheus fix type -->\n                    <ng-container *polymorpheusOutlet=\"$any(item.content) as text; context: getItemContext(item)\">\n                        {{ text }}\n                    </ng-container>\n                </div>\n\n                <button\n                    *ngIf=\"item.hasCloseButton\"\n                    appearance=\"icon\"\n                    automation-id=\"tui-table-bar__close-button\"\n                    size=\"xs\"\n                    tuiIconButton\n                    type=\"button\"\n                    class=\"t-close-button\"\n                    [icon]=\"icons.close\"\n                    [title]=\"closeWord$ | async\"\n                    [tuiMode]=\"getMode(item.mode)\"\n                    (click)=\"onCloseClick(item)\"\n                ></button>\n            </div>\n        </div>\n    </div>\n</div>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiButtonModule, TuiModeModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiTableBarsHostComponent} from './table-bars-host.component';\n\n@NgModule({\n    imports: [CommonModule, PolymorpheusModule, TuiModeModule, TuiButtonModule],\n    declarations: [TuiTableBarsHostComponent],\n    exports: [TuiTableBarsHostComponent],\n})\nexport class TuiTableBarsHostModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}