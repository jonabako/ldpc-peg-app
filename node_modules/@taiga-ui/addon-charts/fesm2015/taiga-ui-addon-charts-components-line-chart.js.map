{"version":3,"file":"taiga-ui-addon-charts-components-line-chart.js","sources":["../../../projects/addon-charts/components/line-chart/line-chart.options.ts","../../../projects/addon-charts/components/line-chart/line-chart-hint.directive.ts","../../../projects/addon-charts/components/line-chart/line-chart.component.ts","../../../projects/addon-charts/components/line-chart/line-chart.template.html","../../../projects/addon-charts/components/line-chart/line-chart.module.ts","../../../projects/addon-charts/components/line-chart/taiga-ui-addon-charts-components-line-chart.ts"],"sourcesContent":["import {Provider} from '@angular/core';\nimport {tuiCreateToken, tuiProvideOptions} from '@taiga-ui/cdk';\n\nexport interface TuiLineChartOptions {\n    readonly dots: boolean;\n    readonly filled: boolean;\n    readonly smoothingFactor: number;\n}\n\nexport const TUI_LINE_CHART_DEFAULT_OPTIONS: TuiLineChartOptions = {\n    dots: false,\n    filled: false,\n    smoothingFactor: 0,\n};\n\nexport const TUI_LINE_CHART_OPTIONS = tuiCreateToken(TUI_LINE_CHART_DEFAULT_OPTIONS);\n\nexport function tuiLineChartOptionsProvider(\n    options: Partial<TuiLineChartOptions>,\n): Provider {\n    return tuiProvideOptions(\n        TUI_LINE_CHART_OPTIONS,\n        options,\n        TUI_LINE_CHART_DEFAULT_OPTIONS,\n    );\n}\n","import {\n    AfterViewInit,\n    ContentChildren,\n    Directive,\n    ElementRef,\n    forwardRef,\n    Inject,\n    Input,\n    NgZone,\n    QueryList,\n    Renderer2,\n    Self,\n} from '@angular/core';\nimport {\n    EMPTY_QUERY,\n    TuiContextWithImplicit,\n    TuiDestroyService,\n    TuiHoveredService,\n    tuiPure,\n    tuiQueryListChanges,\n    tuiZonefree,\n} from '@taiga-ui/cdk';\nimport {TuiPoint} from '@taiga-ui/core';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {combineLatest, Observable} from 'rxjs';\nimport {\n    distinctUntilChanged,\n    filter,\n    map,\n    startWith,\n    switchMap,\n    takeUntil,\n} from 'rxjs/operators';\n\nimport {TuiLineChartComponent} from './line-chart.component';\n\n@Directive({\n    selector: '[tuiLineChartHint]',\n    providers: [TuiDestroyService, TuiHoveredService],\n})\nexport class TuiLineChartHintDirective implements AfterViewInit {\n    @ContentChildren(forwardRef(() => TuiLineChartComponent))\n    private readonly charts: QueryList<TuiLineChartComponent> = EMPTY_QUERY;\n\n    @ContentChildren(forwardRef(() => TuiLineChartComponent), {read: ElementRef})\n    private readonly chartsRef: QueryList<ElementRef<HTMLElement>> = EMPTY_QUERY;\n\n    @Input('tuiLineChartHint')\n    hint: PolymorpheusContent<TuiContextWithImplicit<readonly TuiPoint[]>>;\n\n    constructor(\n        @Inject(Renderer2) private readonly renderer: Renderer2,\n        @Self() @Inject(TuiDestroyService) private readonly destroy$: TuiDestroyService,\n        @Inject(NgZone) private readonly zone: NgZone,\n        @Inject(TuiHoveredService) private readonly hovered$: Observable<boolean>,\n    ) {}\n\n    ngAfterViewInit(): void {\n        combineLatest([tuiLineChartDrivers(this.charts), this.hovered$])\n            .pipe(\n                filter(result => !result.some(Boolean)),\n                tuiZonefree(this.zone),\n                takeUntil(this.destroy$),\n            )\n            .subscribe(() => {\n                this.charts.forEach(chart => chart.onHovered(NaN));\n            });\n    }\n\n    // _chart is required by TuiLineDaysChartComponent that impersonates this directive\n    getContext(index: number, _chart: TuiLineChartComponent): readonly TuiPoint[] {\n        return this.computeContext(...this.charts.map(({value}) => value))[index];\n    }\n\n    // _chart is required by TuiLineDaysChartComponent that impersonates this directive\n    raise(index: number, _chart: TuiLineChartComponent): void {\n        const current = this.charts.map(chart => chart.value[index]);\n        const sorted = [...current].sort((a, b) => a[1] - b[1]);\n\n        this.charts.forEach(chart => chart.onHovered(index));\n        this.chartsRef.forEach(({nativeElement}, index) =>\n            this.renderer.setStyle(\n                nativeElement,\n                'z-index',\n                sorted.indexOf(current[index]),\n            ),\n        );\n    }\n\n    @tuiPure\n    private computeContext(\n        ...values: ReadonlyArray<readonly TuiPoint[]>\n    ): ReadonlyArray<readonly TuiPoint[]> {\n        return (values[0] || []).map((_, index) => values.map(value => value[index]));\n    }\n}\n\nexport function tuiLineChartDrivers(\n    charts: QueryList<{drivers: QueryList<Observable<boolean>>}>,\n): Observable<boolean> {\n    return combineLatest(\n        charts.map(({drivers}) =>\n            tuiQueryListChanges(drivers).pipe(\n                map(drivers => drivers.map(driver => driver.pipe(startWith(false)))),\n            ),\n        ),\n    ).pipe(\n        map(all => all.reduce((acc, drivers) => acc.concat(drivers), [])),\n        switchMap(drivers => combineLatest(drivers)),\n        map(values => values.some(Boolean)),\n        distinctUntilChanged(),\n    );\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostListener,\n    Inject,\n    Input,\n    NgZone,\n    Optional,\n    QueryList,\n    ViewChildren,\n} from '@angular/core';\nimport {TuiLineChartHintContext} from '@taiga-ui/addon-charts/interfaces';\nimport {tuiDraw} from '@taiga-ui/addon-charts/utils';\nimport {\n    EMPTY_QUERY,\n    TuiIdService,\n    tuiIsPresent,\n    tuiPure,\n    TuiStringHandler,\n    tuiZoneOptimized,\n} from '@taiga-ui/cdk';\nimport {\n    TuiHintHoverDirective,\n    TuiHintOptionsDirective,\n    tuiHintOptionsProvider,\n    TuiPoint,\n} from '@taiga-ui/core';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable, Subject} from 'rxjs';\nimport {distinctUntilChanged} from 'rxjs/operators';\n\nimport {TUI_LINE_CHART_OPTIONS, TuiLineChartOptions} from './line-chart.options';\nimport {TuiLineChartHintDirective} from './line-chart-hint.directive';\n\n@Component({\n    selector: 'tui-line-chart',\n    templateUrl: './line-chart.template.html',\n    styleUrls: ['./line-chart.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    viewProviders: [tuiHintOptionsProvider({direction: 'top', hideDelay: 0})],\n})\nexport class TuiLineChartComponent {\n    private readonly hover$ = new Subject<number>();\n\n    private readonly autoIdString: string;\n\n    @ViewChildren(TuiHintHoverDirective)\n    readonly drivers: QueryList<Observable<boolean>> = EMPTY_QUERY;\n\n    @Input('value')\n    set valueSetter(value: readonly TuiPoint[]) {\n        this.value = value.filter(item => !item.some(Number.isNaN));\n    }\n\n    @Input()\n    x = 0;\n\n    @Input()\n    y = 0;\n\n    @Input()\n    width = 0;\n\n    @Input()\n    height = 0;\n\n    @Input()\n    smoothingFactor = this.options.smoothingFactor;\n\n    @Input()\n    xStringify: TuiStringHandler<number> | null = null;\n\n    @Input()\n    yStringify: TuiStringHandler<number> | null = null;\n\n    @Input()\n    filled = this.options.filled;\n\n    @Input()\n    dots = this.options.dots;\n\n    value: readonly TuiPoint[] = [];\n\n    constructor(\n        @Inject(TuiIdService) idService: TuiIdService,\n        @Inject(NgZone) private readonly zone: NgZone,\n        @Optional()\n        @Inject(TuiLineChartHintDirective)\n        readonly hintDirective: TuiLineChartHintDirective | null,\n        @Optional()\n        @Inject(TuiHintOptionsDirective)\n        readonly hintOptions: TuiHintOptionsDirective | null,\n        @Inject(TUI_LINE_CHART_OPTIONS) private readonly options: TuiLineChartOptions,\n    ) {\n        this.autoIdString = idService.generate();\n    }\n\n    @tuiPure\n    get hovered$(): Observable<number> {\n        return this.hover$.pipe(distinctUntilChanged(), tuiZoneOptimized(this.zone));\n    }\n\n    get hintContent(): PolymorpheusContent<TuiLineChartHintContext<TuiPoint>> {\n        return this.hintOptions?.content || '';\n    }\n\n    get fillId(): string {\n        return `tui-line-chart-${this.autoIdString}`;\n    }\n\n    get fill(): string {\n        return this.filled ? `url(#${this.fillId})` : 'none';\n    }\n\n    get viewBox(): string {\n        return `${this.x} ${this.y} ${this.width} ${this.height}`;\n    }\n\n    get d(): string {\n        return this.getD(this.value, this.smoothingFactor);\n    }\n\n    get fillD(): string {\n        return this.value.length\n            ? `${this.d}V ${this.y} H ${this.value[0][0]} V ${this.value[0][1]}`\n            : this.d;\n    }\n\n    get isFocusable(): boolean {\n        return !this.hintDirective && this.hasHints;\n    }\n\n    get hasHints(): boolean {\n        return (\n            !!this.xStringify ||\n            !!this.yStringify ||\n            !!this.hintDirective?.hint ||\n            !!this.hintContent\n        );\n    }\n\n    @HostListener('mouseleave')\n    onMouseLeave(): void {\n        if (!this.hintDirective) {\n            this.onHovered(NaN);\n        }\n    }\n\n    getX(index: number): number {\n        if (this.isSinglePoint) {\n            return this.value[0][0] / 2;\n        }\n\n        return index\n            ? (this.value[index - 1][0] + this.value[index][0]) / 2\n            : 2 * this.value[0][0] - this.getX(1);\n    }\n\n    getWidth(index: number): number {\n        return (100 * this.computeWidth(index)) / this.width;\n    }\n\n    getHintId(index: number): string {\n        return `${this.autoIdString}_${index}`;\n    }\n\n    getImplicit($implicit: TuiPoint): TuiPoint | readonly TuiPoint[] {\n        return (\n            this.hintDirective?.getContext(this.value.indexOf($implicit), this) ||\n            $implicit\n        );\n    }\n\n    getHovered(hovered: number | null): TuiPoint | null {\n        // This checks for NaN and null too since async pipe returns null before first item\n        return tuiIsPresent(hovered) && Number.isInteger(hovered)\n            ? this.value[hovered]\n            : null;\n    }\n\n    getBottom(y: number): number {\n        return (100 * (y - this.y)) / this.height;\n    }\n\n    getLeft(x: number): number {\n        return (100 * (x - this.x)) / this.width;\n    }\n\n    getOffset(x: number): number {\n        return (100 * (this.value[x][0] - this.getX(x))) / this.computeWidth(x);\n    }\n\n    onMouseEnter(index: number): void {\n        if (this.hintDirective) {\n            this.hintDirective.raise(index, this);\n        } else {\n            this.onHovered(index);\n        }\n    }\n\n    onHovered(index: number): void {\n        this.hover$.next(index);\n    }\n\n    private get isSinglePoint(): boolean {\n        return this.value.length === 1;\n    }\n\n    @tuiPure\n    private getD(value: readonly TuiPoint[], smoothingFactor: number): string {\n        return value.reduce(\n            (d, point, index) =>\n                index ? `${d} ${tuiDraw(value, index, smoothingFactor)}` : `M ${point}`,\n            '',\n        );\n    }\n\n    private computeWidth(index: number): number {\n        return index === this.value.length - 1\n            ? 2 * (this.value[index][0] - this.getX(index))\n            : this.getX(index + 1) - this.getX(index);\n    }\n}\n","<ng-container *tuiLet=\"hovered$ | async as hovered\">\n    <svg\n        focusable=\"false\"\n        height=\"100%\"\n        preserveAspectRatio=\"none\"\n        width=\"100%\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        class=\"t-svg\"\n        [attr.viewBox]=\"viewBox\"\n    >\n        <defs>\n            <linearGradient\n                x1=\"0\"\n                x2=\"0\"\n                y1=\"1\"\n                y2=\"0\"\n                [attr.id]=\"fillId\"\n            >\n                <stop\n                    offset=\"0%\"\n                    stop-color=\"currentColor\"\n                    stop-opacity=\"0.5\"\n                />\n                <stop\n                    offset=\"100%\"\n                    stop-color=\"currentColor\"\n                    stop-opacity=\"0\"\n                />\n            </linearGradient>\n        </defs>\n        <path\n            stroke=\"none\"\n            [attr.d]=\"fillD\"\n            [attr.fill]=\"fill\"\n        />\n        <path\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            vector-effect=\"non-scaling-stroke\"\n            [attr.d]=\"d\"\n        />\n    </svg>\n    <ng-container *ngIf=\"dots\">\n        <div\n            *ngFor=\"let point of value\"\n            class=\"t-dot\"\n            [style.bottom.%]=\"getBottom(point[1])\"\n            [style.left.%]=\"getLeft(point[0])\"\n        ></div>\n    </ng-container>\n    <ng-container *ngIf=\"hasHints\">\n        <ng-container *ngFor=\"let point of value; let index = index\">\n            <!-- TODO: Fix hint type -->\n            <div\n                *ngIf=\"value.length > 1 || dots\"\n                class=\"t-column\"\n                [class.t-column_hint_hovered]=\"drivers.get(index) | async\"\n                [class.t-column_hovered]=\"hovered === index\"\n                [style.left.%]=\"getLeft(getX(index))\"\n                [style.width.%]=\"getWidth(index)\"\n                [tuiHint]=\"$any(hintDirective?.hint || hintContent)\"\n                [tuiHintContext]=\"{$implicit: getImplicit(point), index: index}\"\n                [tuiHintDescribe]=\"isFocusable ? getHintId(index) : null\"\n                [tuiHintHost]=\"hintHost\"\n                (mouseenter)=\"onMouseEnter(index)\"\n            >\n                <div\n                    class=\"t-line t-line_vertical\"\n                    [style.left.%]=\"getOffset(index)\"\n                ></div>\n                <div\n                    #hintHost\n                    class=\"t-host\"\n                    [id]=\"getHintId(index)\"\n                    [style.bottom.%]=\"getBottom(point[1])\"\n                    [style.left.%]=\"getOffset(index)\"\n                    [tuiFocusable]=\"isFocusable\"\n                ></div>\n            </div>\n            <div\n                *ngIf=\"isFocusable\"\n                class=\"t-line t-line_horizontal\"\n                [style.bottom.%]=\"getBottom(point[1])\"\n            ></div>\n        </ng-container>\n    </ng-container>\n    <ng-container *ngIf=\"getHovered(hovered) as point\">\n        <div\n            *ngIf=\"xStringify\"\n            class=\"t-hint t-hint_x\"\n            [style.left.%]=\"getLeft(point[0])\"\n        >\n            {{ xStringify(point[0]) }}\n        </div>\n        <div\n            *ngIf=\"yStringify\"\n            class=\"t-hint t-hint_y\"\n            [style.bottom.%]=\"getBottom(point[1])\"\n        >\n            {{ yStringify(point[1]) }}\n        </div>\n    </ng-container>\n</ng-container>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiFocusableModule, TuiLetModule} from '@taiga-ui/cdk';\nimport {TuiHintModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiLineChartComponent} from './line-chart.component';\nimport {TuiLineChartHintDirective} from './line-chart-hint.directive';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        PolymorpheusModule,\n        TuiHintModule,\n        TuiFocusableModule,\n        TuiLetModule,\n    ],\n    declarations: [TuiLineChartComponent, TuiLineChartHintDirective],\n    exports: [TuiLineChartComponent, TuiLineChartHintDirective],\n})\nexport class TuiLineChartModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i2"],"mappings":"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"}