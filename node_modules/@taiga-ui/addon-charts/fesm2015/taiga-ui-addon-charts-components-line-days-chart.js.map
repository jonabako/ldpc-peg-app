{"version":3,"file":"taiga-ui-addon-charts-components-line-days-chart.js","sources":["../../../projects/addon-charts/components/line-days-chart/line-days-chart-hint.directive.ts","../../../projects/addon-charts/components/line-days-chart/line-days-chart.component.ts","../../../projects/addon-charts/components/line-days-chart/line-days-chart.template.html","../../../projects/addon-charts/components/line-days-chart/line-days-chart.module.ts","../../../projects/addon-charts/components/line-days-chart/taiga-ui-addon-charts-components-line-days-chart.ts"],"sourcesContent":["import {\n    AfterContentInit,\n    ContentChildren,\n    Directive,\n    forwardRef,\n    Inject,\n    Input,\n    NgZone,\n    QueryList,\n    Self,\n} from '@angular/core';\nimport {tuiLineChartDrivers} from '@taiga-ui/addon-charts/components/line-chart';\nimport {\n    EMPTY_QUERY,\n    TuiContextWithImplicit,\n    TuiDay,\n    TuiDestroyService,\n    TuiHoveredService,\n    tuiPure,\n    tuiZonefree,\n} from '@taiga-ui/cdk';\nimport {TuiPoint} from '@taiga-ui/core';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {combineLatest, Observable} from 'rxjs';\nimport {filter, takeUntil} from 'rxjs/operators';\n\nimport {TuiLineDaysChartComponent} from './line-days-chart.component';\n\nfunction find(value: ReadonlyArray<[TuiDay, number]>, current: TuiDay): [TuiDay, number] {\n    return value.find(([day]) => day.daySame(current)) || [current, NaN];\n}\n\n// TODO: Consider extending TuiLineChartHintDirective\n@Directive({\n    selector: '[tuiLineChartHint]',\n    providers: [TuiDestroyService, TuiHoveredService],\n})\nexport class TuiLineDaysChartHintDirective implements AfterContentInit {\n    @ContentChildren(forwardRef(() => TuiLineDaysChartComponent))\n    private readonly charts: QueryList<TuiLineDaysChartComponent> = EMPTY_QUERY;\n\n    @Input('tuiLineChartHint')\n    hint: PolymorpheusContent<TuiContextWithImplicit<readonly TuiPoint[]>>;\n\n    constructor(\n        @Self() @Inject(TuiDestroyService) private readonly destroy$: TuiDestroyService,\n        @Inject(NgZone) private readonly zone: NgZone,\n        @Inject(TuiHoveredService) private readonly hovered$: Observable<boolean>,\n    ) {}\n\n    ngAfterContentInit(): void {\n        combineLatest([\n            ...this.charts.map(({charts}) => tuiLineChartDrivers(charts)),\n            this.hovered$,\n        ])\n            .pipe(\n                filter(result => !result.some(Boolean)),\n                tuiZonefree(this.zone),\n                takeUntil(this.destroy$),\n            )\n            .subscribe(() => {\n                this.charts.forEach(chart => chart.onHovered(NaN));\n            });\n    }\n\n    getContext(day: TuiDay): ReadonlyArray<[TuiDay, number]> {\n        return this.getMap(...this.charts.map(({value}) => value)).get(String(day)) || [];\n    }\n\n    raise(day: TuiDay): void {\n        const current = this.charts\n            .map(({value}) => find(value, day))\n            .filter(([_, value]) => !Number.isNaN(value));\n        const sorted = [...current].sort((a, b) => a[1] - b[1]);\n\n        this.charts.forEach((chart, index) => {\n            chart.onHovered(day);\n            chart.zIndex = Math.max(sorted.indexOf(current[index]), 0);\n        });\n    }\n\n    @tuiPure\n    private getMap(\n        ...values: Array<ReadonlyArray<[TuiDay, number]>>\n    ): Map<string, ReadonlyArray<[TuiDay, number]>> {\n        return (values[0] || []).reduce(\n            (map, [day]) =>\n                map.set(\n                    String(day),\n                    values.map(value => find(value, day)),\n                ),\n            new Map<string, ReadonlyArray<[TuiDay, number]>>(),\n        );\n    }\n}\n","import {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    Inject,\n    Input,\n    NgZone,\n    Optional,\n    QueryList,\n    Self,\n    ViewChildren,\n} from '@angular/core';\nimport {\n    TUI_LINE_CHART_OPTIONS,\n    TuiLineChartComponent,\n    tuiLineChartDrivers,\n    TuiLineChartHintDirective,\n    TuiLineChartOptions,\n} from '@taiga-ui/addon-charts/components/line-chart';\nimport {\n    EMPTY_ARRAY,\n    EMPTY_QUERY,\n    TuiContextWithImplicit,\n    TuiDay,\n    TuiDestroyService,\n    TuiHoveredService,\n    tuiIsNumber,\n    tuiIsPresent,\n    TuiMonth,\n    tuiPure,\n    TuiStringHandler,\n    tuiZonefree,\n} from '@taiga-ui/cdk';\nimport {TuiPoint} from '@taiga-ui/core';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {combineLatest, Observable} from 'rxjs';\nimport {filter, takeUntil} from 'rxjs/operators';\n\nimport {TuiLineDaysChartHintDirective} from './line-days-chart-hint.directive';\n\nconst DUMMY: TuiPoint = [NaN, NaN];\n\n@Component({\n    selector: 'tui-line-days-chart',\n    templateUrl: './line-days-chart.template.html',\n    styleUrls: ['./line-days-chart.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        TuiDestroyService,\n        TuiHoveredService,\n        {\n            provide: TuiLineChartHintDirective,\n            useExisting: TuiLineDaysChartComponent,\n        },\n    ],\n})\nexport class TuiLineDaysChartComponent implements AfterViewInit {\n    @ViewChildren(TuiLineChartComponent)\n    readonly charts: QueryList<TuiLineChartComponent> = EMPTY_QUERY;\n\n    @Input('value')\n    set valueSetter(value: ReadonlyArray<[TuiDay, number]>) {\n        if (!value.length) {\n            this.value = [];\n\n            return;\n        }\n\n        const start = value[0][0];\n        const mutable = [...value];\n        const length = TuiDay.lengthBetween(start, value[value.length - 1][0]) + 1;\n\n        this.value = Array.from({length}, (_, day) => {\n            const currentDay = start.append({day});\n            const shifted = currentDay.daySame(mutable[0][0]) ? mutable.shift() : null;\n            const currentValue = shifted ? shifted[1] : NaN;\n\n            return [currentDay, currentValue] as [TuiDay, number];\n        });\n    }\n\n    @Input()\n    y = 0;\n\n    @Input()\n    height = 0;\n\n    @Input()\n    smoothingFactor = this.options.smoothingFactor;\n\n    @Input()\n    hintContent: PolymorpheusContent<TuiContextWithImplicit<[TuiDay, number]>>;\n\n    @Input()\n    xStringify: TuiStringHandler<TuiDay> | null = null;\n\n    @Input()\n    yStringify: TuiStringHandler<number> | null = null;\n\n    @Input()\n    dots = this.options.dots;\n\n    @HostBinding('style.zIndex')\n    zIndex = 0;\n\n    value: ReadonlyArray<[TuiDay, number]> = [];\n\n    constructor(\n        @Optional()\n        @Inject(TuiLineDaysChartHintDirective)\n        private readonly hintDirective: TuiLineDaysChartHintDirective | null,\n        @Self() @Inject(TuiDestroyService) private readonly destroy$: TuiDestroyService,\n        @Inject(NgZone) private readonly zone: NgZone,\n        @Inject(TuiHoveredService) private readonly hovered$: Observable<boolean>,\n        @Inject(TUI_LINE_CHART_OPTIONS) private readonly options: TuiLineChartOptions,\n    ) {}\n\n    get months(): ReadonlyArray<readonly TuiPoint[]> {\n        return this.value.length ? this.breakMonths(this.value) : EMPTY_ARRAY;\n    }\n\n    get firstWidth(): number {\n        return this.months.length * this.value[0][0].daysCount;\n    }\n\n    get hint():\n        | PolymorpheusContent<TuiContextWithImplicit<[TuiDay, number]>>\n        | PolymorpheusContent<TuiContextWithImplicit<readonly TuiPoint[]>> {\n        return this.hintDirective?.hint ?? this.hintContent;\n    }\n\n    @tuiPure\n    getHintContext(x: number, value: ReadonlyArray<[TuiDay, number]>): [TuiDay, number] {\n        return value[x - value[0][0].day + 1];\n    }\n\n    ngAfterViewInit(): void {\n        combineLatest([tuiLineChartDrivers(this.charts), this.hovered$])\n            .pipe(\n                filter(result => !result.some(Boolean)),\n                tuiZonefree(this.zone),\n                takeUntil(this.destroy$),\n            )\n            .subscribe(() => {\n                this.onHovered(NaN);\n            });\n    }\n\n    readonly daysStringify: TuiStringHandler<number> = index =>\n        this.xStringify ? this.xStringify(this.getDay(index)) : '';\n\n    getX(index: number): number {\n        const current = this.getDay(index);\n        const months = TuiMonth.lengthBetween(this.value[0][0], current);\n        const offset = months * current.daysCount;\n\n        return index - offset;\n    }\n\n    onHovered(day: TuiDay | number): void {\n        if (tuiIsNumber(day)) {\n            this.charts.forEach(chart => chart.onHovered(NaN));\n\n            return;\n        }\n\n        const index = TuiMonth.lengthBetween(this.value[0][0], day);\n        const x = TuiDay.lengthBetween(this.value[0][0], day) + this.value[0][0].day - 1;\n        const current = this.charts.get(index);\n\n        this.charts.forEach(chart => {\n            if (chart === current) {\n                current.onHovered(current.value.findIndex(point => point[0] === x));\n            } else {\n                chart.onHovered(NaN);\n            }\n        });\n    }\n\n    raise(index: number, {value}: TuiLineChartComponent): void {\n        const x = value[index][0];\n        const month = this.getDay(x);\n\n        if (this.hintDirective) {\n            this.hintDirective.raise(month);\n        } else {\n            this.onHovered(month);\n        }\n    }\n\n    getWidth(index: number): number {\n        return this.getDay(index).daysCount * this.months.length;\n    }\n\n    getContext(index: number, {value}: TuiLineChartComponent): unknown {\n        const x = value[index][0];\n\n        return this.hintDirective\n            ? this.hintDirective.getContext(this.getDay(x))\n            : this.getHintContext(x, this.value);\n    }\n\n    @tuiPure\n    private breakMonths(\n        value: ReadonlyArray<[TuiDay, number]>,\n    ): ReadonlyArray<readonly TuiPoint[]> {\n        const offset = value[0][0].day - 1;\n\n        return Array.from(\n            {length: TuiMonth.lengthBetween(value[0][0], value[value.length - 1][0]) + 1},\n            (_, i) => i + value[0][0].month + value[0][0].year * 12,\n        )\n            .map(absoluteMonth =>\n                value\n                    .map<TuiPoint | null>(([{month, year}, y], index) =>\n                        month + year * 12 === absoluteMonth ? [index + offset, y] : null,\n                    )\n                    .filter(tuiIsPresent),\n            )\n            .map((month, index, array) =>\n                index === array.length - 1\n                    ? month\n                    : [\n                          ...month,\n                          array[index + 1].find(day => !Number.isNaN(day[1])) || DUMMY,\n                      ],\n            );\n    }\n\n    private getDay(index: number): TuiDay {\n        return this.value[index - this.value[0][0].day + 1][0];\n    }\n}\n","<tui-line-chart\n    *ngFor=\"let month of months; let first = first\"\n    class=\"t-chart\"\n    [dots]=\"dots\"\n    [height]=\"height\"\n    [smoothingFactor]=\"smoothingFactor\"\n    [style.zIndex]=\"zIndex\"\n    [tuiHintContent]=\"hintContent ? hint : ''\"\n    [value]=\"month\"\n    [width]=\"first ? firstWidth : getWidth(month[0][0])\"\n    [x]=\"first ? 0 : getX(month[0][0])\"\n    [xStringify]=\"xStringify ? daysStringify : null\"\n    [y]=\"y\"\n    [yStringify]=\"yStringify\"\n></tui-line-chart>\n<ng-template\n    #hint\n    let-point\n>\n    <ng-container *polymorpheusOutlet=\"hintContent as text; context: {$implicit: getHintContext(point[0], value)}\">\n        {{ text }}\n    </ng-container>\n</ng-template>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiLineChartModule} from '@taiga-ui/addon-charts/components/line-chart';\nimport {TuiHintModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiLineDaysChartComponent} from './line-days-chart.component';\nimport {TuiLineDaysChartHintDirective} from './line-days-chart-hint.directive';\n\n@NgModule({\n    imports: [CommonModule, TuiLineChartModule, PolymorpheusModule, TuiHintModule],\n    declarations: [TuiLineDaysChartComponent, TuiLineDaysChartHintDirective],\n    exports: [TuiLineDaysChartComponent, TuiLineDaysChartHintDirective],\n})\nexport class TuiLineDaysChartModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1","i2"],"mappings":"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"}