import { Directive, Inject, Optional, Output } from '@angular/core';
import { ControlContainer, NgControl } from '@angular/forms';
import { EMPTY, Subject } from 'rxjs';
import { distinctUntilChanged, switchAll } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
export class TuiValueChangesDirective {
    constructor(container, control) {
        this.container = container;
        this.control = control;
        this.refresh$ = new Subject();
        this.tuiValueChanges = this.refresh$.pipe(distinctUntilChanged(), switchAll(), distinctUntilChanged());
    }
    ngDoCheck() {
        var _a, _b;
        this.refresh$.next(((_a = this.control) === null || _a === void 0 ? void 0 : _a.valueChanges) || ((_b = this.container) === null || _b === void 0 ? void 0 : _b.valueChanges) || EMPTY);
    }
}
TuiValueChangesDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: TuiValueChangesDirective, deps: [{ token: ControlContainer, optional: true }, { token: NgControl, optional: true }], target: i0.ɵɵFactoryTarget.Directive });
TuiValueChangesDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.17", type: TuiValueChangesDirective, selector: "[tuiValueChanges]", outputs: { tuiValueChanges: "tuiValueChanges" }, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: TuiValueChangesDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[tuiValueChanges]',
                }]
        }], ctorParameters: function () { return [{ type: i1.ControlContainer, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [ControlContainer]
                }] }, { type: i1.NgControl, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [NgControl]
                }] }]; }, propDecorators: { tuiValueChanges: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsdWUtY2hhbmdlcy5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jZGsvZGlyZWN0aXZlcy92YWx1ZS1jaGFuZ2VzL3ZhbHVlLWNoYW5nZXMuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQVcsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDM0UsT0FBTyxFQUFDLGdCQUFnQixFQUFFLFNBQVMsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQzNELE9BQU8sRUFBQyxLQUFLLEVBQWMsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQ2hELE9BQU8sRUFBQyxvQkFBb0IsRUFBRSxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQzs7O0FBSy9ELE1BQU0sT0FBTyx3QkFBd0I7SUFVakMsWUFHcUIsU0FBa0MsRUFHbEMsT0FBeUI7UUFIekIsY0FBUyxHQUFULFNBQVMsQ0FBeUI7UUFHbEMsWUFBTyxHQUFQLE9BQU8sQ0FBa0I7UUFmN0IsYUFBUSxHQUFHLElBQUksT0FBTyxFQUFpQixDQUFDO1FBR2hELG9CQUFlLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQ3pDLG9CQUFvQixFQUFFLEVBQ3RCLFNBQVMsRUFBRSxFQUNYLG9CQUFvQixFQUFFLENBQ3pCLENBQUM7SUFTQyxDQUFDO0lBRUosU0FBUzs7UUFDTCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDZCxDQUFBLE1BQUEsSUFBSSxDQUFDLE9BQU8sMENBQUUsWUFBWSxNQUFJLE1BQUEsSUFBSSxDQUFDLFNBQVMsMENBQUUsWUFBWSxDQUFBLElBQUksS0FBSyxDQUN0RSxDQUFDO0lBQ04sQ0FBQzs7c0hBdkJRLHdCQUF3QixrQkFZckIsZ0JBQWdCLDZCQUdoQixTQUFTOzBHQWZaLHdCQUF3Qjs0RkFBeEIsd0JBQXdCO2tCQUhwQyxTQUFTO21CQUFDO29CQUNQLFFBQVEsRUFBRSxtQkFBbUI7aUJBQ2hDOzswQkFZUSxRQUFROzswQkFDUixNQUFNOzJCQUFDLGdCQUFnQjs7MEJBRXZCLFFBQVE7OzBCQUNSLE1BQU07MkJBQUMsU0FBUzs0Q0FYWixlQUFlO3NCQUR2QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEaXJlY3RpdmUsIERvQ2hlY2ssIEluamVjdCwgT3B0aW9uYWwsIE91dHB1dH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbnRyb2xDb250YWluZXIsIE5nQ29udHJvbH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHtFTVBUWSwgT2JzZXJ2YWJsZSwgU3ViamVjdH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge2Rpc3RpbmN0VW50aWxDaGFuZ2VkLCBzd2l0Y2hBbGx9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbdHVpVmFsdWVDaGFuZ2VzXScsXG59KVxuZXhwb3J0IGNsYXNzIFR1aVZhbHVlQ2hhbmdlc0RpcmVjdGl2ZTxUPiBpbXBsZW1lbnRzIERvQ2hlY2sge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgcmVmcmVzaCQgPSBuZXcgU3ViamVjdDxPYnNlcnZhYmxlPFQ+PigpO1xuXG4gICAgQE91dHB1dCgpXG4gICAgcmVhZG9ubHkgdHVpVmFsdWVDaGFuZ2VzID0gdGhpcy5yZWZyZXNoJC5waXBlKFxuICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgICBzd2l0Y2hBbGwoKSxcbiAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICApO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIEBPcHRpb25hbCgpXG4gICAgICAgIEBJbmplY3QoQ29udHJvbENvbnRhaW5lcilcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb250YWluZXI6IENvbnRyb2xDb250YWluZXIgfCBudWxsLFxuICAgICAgICBAT3B0aW9uYWwoKVxuICAgICAgICBASW5qZWN0KE5nQ29udHJvbClcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb250cm9sOiBOZ0NvbnRyb2wgfCBudWxsLFxuICAgICkge31cblxuICAgIG5nRG9DaGVjaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoJC5uZXh0KFxuICAgICAgICAgICAgdGhpcy5jb250cm9sPy52YWx1ZUNoYW5nZXMgfHwgdGhpcy5jb250YWluZXI/LnZhbHVlQ2hhbmdlcyB8fCBFTVBUWSxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iXX0=