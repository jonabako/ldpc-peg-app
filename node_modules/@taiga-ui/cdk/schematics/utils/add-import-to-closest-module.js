"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addImportToClosestModule = void 0;
const ng_morph_1 = require("ng-morph");
const add_import_to_component_1 = require("../utils/add-import-to-component");
const add_unique_import_1 = require("./add-unique-import");
const is_standalone_component_1 = require("./angular/is-standalone-component");
const ng_component_1 = require("./angular/ng-component");
const ng_module_1 = require("./angular/ng-module");
function addImportToClosestModule(componentPath, moduleName, moduleSpecifier) {
    const [ngComponent] = ng_component_1.getNgComponents(componentPath);
    if (!ngComponent) {
        return;
    }
    if (is_standalone_component_1.isStandaloneComponent(ngComponent)) {
        add_import_to_component_1.addImportToComponent(ngComponent, moduleName, { unique: true });
        add_unique_import_1.addUniqueImport(ngComponent.getSourceFile().getFilePath(), moduleName, moduleSpecifier);
        return;
    }
    const ngModule = ng_module_1.findNgModule(ngComponent);
    if (ngModule) {
        ng_morph_1.addImportToNgModule(ngModule, moduleName, {
            unique: true,
        });
        add_unique_import_1.addUniqueImport(ngModule.getSourceFile().getFilePath(), moduleName, moduleSpecifier);
    }
}
exports.addImportToClosestModule = addImportToClosestModule;
