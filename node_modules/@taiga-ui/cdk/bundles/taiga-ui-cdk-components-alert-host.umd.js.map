{"version":3,"file":"taiga-ui-cdk-components-alert-host.umd.js","sources":["../../../projects/cdk/components/alert-host/alert-host.component.ts","../../../projects/cdk/components/alert-host/alert-host.template.html","../../../projects/cdk/components/alert-host/alert-host.module.ts","../../../projects/cdk/components/alert-host/taiga-ui-cdk-components-alert-host.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    Inject,\n    INJECTOR,\n    Injector,\n    OnInit,\n    Self,\n    TrackByFunction,\n    ViewEncapsulation,\n} from '@angular/core';\nimport {TUI_PARENT_ANIMATION} from '@taiga-ui/cdk/constants';\nimport {TuiDestroyService} from '@taiga-ui/cdk/services';\nimport {TUI_ALERTS} from '@taiga-ui/cdk/tokens';\nimport {TuiDialog, TuiTypedMapper} from '@taiga-ui/cdk/types';\nimport {POLYMORPHEUS_CONTEXT} from '@tinkoff/ng-polymorpheus';\nimport {combineLatest, Observable} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\n@Component({\n    selector: 'tui-alert-host',\n    templateUrl: './alert-host.template.html',\n    styleUrls: ['./alert-host.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    // So that we do not force OnPush on custom alerts\n    // eslint-disable-next-line @angular-eslint/prefer-on-push-component-change-detection\n    changeDetection: ChangeDetectionStrategy.Default,\n    providers: [TuiDestroyService],\n    animations: [TUI_PARENT_ANIMATION],\n})\nexport class TuiAlertHostComponent<T extends TuiDialog<unknown, unknown>>\n    implements OnInit\n{\n    alerts: ReadonlyArray<readonly T[]> = [];\n\n    constructor(\n        @Inject(TUI_ALERTS) private readonly allAlerts: Array<Observable<readonly T[]>>,\n        @Inject(INJECTOR) private readonly injector: Injector,\n        @Self() @Inject(TuiDestroyService) private readonly destroy$: Observable<void>,\n        @Inject(ChangeDetectorRef) private readonly cdr: ChangeDetectorRef,\n    ) {}\n\n    readonly trackBy: TrackByFunction<readonly T[]> = (index: number) => index;\n\n    ngOnInit(): void {\n        // Due to this view being parallel to app content, `markForCheck` from `async` pipe\n        // can happen after view was checked, so calling `detectChanges` instead\n        combineLatest(this.allAlerts)\n            .pipe(takeUntil(this.destroy$))\n            .subscribe(alerts => {\n                this.alerts = alerts;\n                this.cdr.detectChanges();\n            });\n    }\n\n    readonly mapper: TuiTypedMapper<[unknown], Injector> = useValue =>\n        Injector.create({\n            providers: [\n                {\n                    provide: POLYMORPHEUS_CONTEXT,\n                    useValue,\n                },\n            ],\n            parent: this.injector,\n        });\n}\n","<div\n    *ngFor=\"let alert of alerts; trackBy: trackBy\"\n    class=\"t-wrapper\"\n    @tuiParentAnimation\n>\n    <ng-container\n        *ngFor=\"let item of alert\"\n        [ngComponentOutlet]=\"item.component.component\"\n        [ngComponentOutletInjector]=\"item | tuiMapper: mapper\"\n    ></ng-container>\n</div>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiMapperPipeModule} from '@taiga-ui/cdk/pipes';\n\nimport {TuiAlertHostComponent} from './alert-host.component';\n\n@NgModule({\n    imports: [CommonModule, TuiMapperPipeModule],\n    declarations: [TuiAlertHostComponent],\n    exports: [TuiAlertHostComponent],\n})\nexport class TuiAlertHostModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Injector","POLYMORPHEUS_CONTEXT","combineLatest","takeUntil","i0","TUI_ALERTS","INJECTOR","TuiDestroyService","ChangeDetectorRef","i1","i2","TUI_PARENT_ANIMATION","Component","ViewEncapsulation","ChangeDetectionStrategy","Inject","Self","CommonModule","TuiMapperPipeModule","NgModule"],"mappings":"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"}