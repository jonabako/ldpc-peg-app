{"version":3,"file":"taiga-ui-cdk-directives-repeat-times.umd.js","sources":["../../../projects/cdk/directives/repeat-times/repeat-times.directive.ts","../../../projects/cdk/directives/repeat-times/repeat-times.module.ts","../../../projects/cdk/directives/repeat-times/taiga-ui-cdk-directives-repeat-times.ts"],"sourcesContent":["import {Directive, Inject, Input, TemplateRef, ViewContainerRef} from '@angular/core';\nimport {TuiContextWithImplicit} from '@taiga-ui/cdk/interfaces';\nimport {tuiClamp} from '@taiga-ui/cdk/utils/math';\n\nconst MAX_VALUE = 0x10000;\n\nexport class TuiRepeatTimesContext implements TuiContextWithImplicit<number> {\n    constructor(readonly $implicit: number) {}\n}\n\n/**\n * Directive similar to ngFor but using a number of repetitions rather than an array\n *\n * {@link TuiRepeatTimesDirective.tuiRepeatTimesOf requested number of times}.\n * {@link TuiRepeatTimesContext context} for every instance of the template inherits outer context and stores\n * {@link TuiRepeatTimesContext.$implicit index} of a template instance.\n */\n@Directive({\n    selector: '[tuiRepeatTimes][tuiRepeatTimesOf]',\n})\nexport class TuiRepeatTimesDirective {\n    @Input()\n    set tuiRepeatTimesOf(count: number) {\n        const safeCount = Math.floor(tuiClamp(count, 0, MAX_VALUE));\n\n        const {length} = this.viewContainer;\n\n        if (count < length) {\n            this.removeContainers(length - count);\n        } else {\n            this.addContainers(safeCount);\n        }\n    }\n\n    constructor(\n        @Inject(ViewContainerRef)\n        private readonly viewContainer: ViewContainerRef,\n        @Inject(TemplateRef)\n        private readonly templateRef: TemplateRef<TuiRepeatTimesContext>,\n    ) {}\n\n    private addContainers(count: number): void {\n        for (let index = this.viewContainer.length; index < count; index++) {\n            this.viewContainer.createEmbeddedView<TuiRepeatTimesContext>(\n                this.templateRef,\n                new TuiRepeatTimesContext(index),\n            );\n        }\n    }\n\n    private removeContainers(amount: number): void {\n        for (let index = 0; index < amount; index++) {\n            this.viewContainer.remove();\n        }\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiRepeatTimesDirective} from './repeat-times.directive';\n\n@NgModule({\n    declarations: [TuiRepeatTimesDirective],\n    exports: [TuiRepeatTimesDirective],\n})\nexport class TuiRepeatTimesModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["tuiClamp","ViewContainerRef","TemplateRef","i0","Directive","Inject","Input","NgModule"],"mappings":"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"}