{"version":3,"file":"taiga-ui-cdk-directives-obscured.umd.js","sources":["../../../projects/cdk/directives/obscured/obscured.directive.ts","../../../projects/cdk/directives/obscured/obscured.module.ts","../../../projects/cdk/directives/obscured/taiga-ui-cdk-directives-obscured.ts"],"sourcesContent":["import {Directive, Inject, Input, Optional, Output, Self} from '@angular/core';\nimport {TuiActiveZoneDirective} from '@taiga-ui/cdk/directives/active-zone';\nimport {tuiIfMap} from '@taiga-ui/cdk/observables';\nimport {\n    TuiDestroyService,\n    TuiObscuredService,\n    TuiParentsScrollService,\n} from '@taiga-ui/cdk/services';\nimport {Observable, Subject} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n/**\n * Directive that monitors element visibility\n */\n@Directive({\n    selector: '[tuiObscured]',\n    providers: [TuiObscuredService, TuiParentsScrollService, TuiDestroyService],\n})\nexport class TuiObscuredDirective {\n    private readonly enabled$ = new Subject<boolean>();\n\n    @Input()\n    set tuiObscuredEnabled(enabled: boolean) {\n        this.enabled$.next(enabled);\n    }\n\n    @Output()\n    readonly tuiObscured: Observable<boolean>;\n\n    constructor(\n        @Optional()\n        @Inject(TuiActiveZoneDirective)\n        activeZone: TuiActiveZoneDirective | null,\n        @Self()\n        @Inject(TuiObscuredService)\n        obscured$: TuiObscuredService,\n    ) {\n        const mapped$ = obscured$.pipe(\n            map(\n                obscuredBy =>\n                    !!obscuredBy &&\n                    (!activeZone ||\n                        !obscuredBy.length ||\n                        obscuredBy.every(element => !activeZone.contains(element))),\n            ),\n        );\n\n        this.tuiObscured = this.enabled$.pipe(tuiIfMap(() => mapped$));\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiObscuredDirective} from './obscured.directive';\n\n@NgModule({\n    declarations: [TuiObscuredDirective],\n    exports: [TuiObscuredDirective],\n})\nexport class TuiObscuredModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Subject","map","tuiIfMap","TuiActiveZoneDirective","TuiObscuredService","i0","TuiParentsScrollService","TuiDestroyService","Directive","Optional","Inject","Self","Input","Output","NgModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;IAWA;;IAEG;AAKH,QAAA,oBAAA,kBAAA,YAAA;QAWI,SAGI,oBAAA,CAAA,UAAyC,EAGzC,SAA6B,EAAA;IAhBhB,QAAA,IAAA,CAAA,QAAQ,GAAG,IAAIA,YAAO,EAAW,CAAC;IAkB/C,QAAA,IAAM,OAAO,GAAG,SAAS,CAAC,IAAI,CAC1BC,aAAG,CACC,UAAA,UAAU,EAAA,EACN,OAAA,CAAC,CAAC,UAAU;IACZ,aAAC,CAAC,UAAU;oBACR,CAAC,UAAU,CAAC,MAAM;oBAClB,UAAU,CAAC,KAAK,CAAC,UAAA,OAAO,EAAI,EAAA,OAAA,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAA,CAAC,CAAC,CAH/D,EAG+D,CACtE,CACJ,CAAC;IAEF,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAACC,oBAAQ,CAAC,cAAM,OAAA,OAAO,GAAA,CAAC,CAAC,CAAC;SAClE;IA3BD,IAAA,MAAA,CAAA,cAAA,CACI,oBAAkB,CAAA,SAAA,EAAA,oBAAA,EAAA;IADtB,QAAA,GAAA,EAAA,UACuB,OAAgB,EAAA;IACnC,YAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC/B;;;IAAA,KAAA,CAAA,CAAA;;;4IANQ,oBAAoB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAajBC,yBAAsB,EAAA,QAAA,EAAA,IAAA,EAAA,EAAA,EAAA,KAAA,EAGtBC,qBAAkB,EAAA,IAAA,EAAA,IAAA,EAAA,CAAA,EAAA,MAAA,EAAAC,aAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;IAhBrB,oBAAA,CAAA,IAAA,GAAAA,aAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,oBAAoB,uIAFlB,CAACD,qBAAkB,EAAEE,0BAAuB,EAAEC,oBAAiB,CAAC,EAAA,QAAA,EAAAF,aAAA,EAAA,CAAA,CAAA;sHAElE,oBAAoB,EAAA,UAAA,EAAA,CAAA;sBAJhCG,YAAS;IAAC,YAAA,IAAA,EAAA,CAAA;IACP,oBAAA,QAAQ,EAAE,eAAe;IACzB,oBAAA,SAAS,EAAE,CAACJ,qBAAkB,EAAEE,0BAAuB,EAAEC,oBAAiB,CAAC;qBAC9E,CAAA;;;kCAaQE,WAAQ;;kCACRC,SAAM;mCAACP,yBAAsB,CAAA;;kCAE7BQ,OAAI;;kCACJD,SAAM;mCAACN,qBAAkB,CAAA;;6BAZ1B,kBAAkB,EAAA,CAAA;0BADrBQ,QAAK;oBAMG,WAAW,EAAA,CAAA;0BADnBC,SAAM;;;AClBX,QAAA,iBAAA,kBAAA,YAAA;IAAA,IAAA,SAAA,iBAAA,GAAA;;;;yIAAa,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAAR,aAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;0IAAjB,iBAAiB,EAAA,YAAA,EAAA,CAHX,oBAAoB,CAAA,EAAA,OAAA,EAAA,CACzB,oBAAoB,CAAA,EAAA,CAAA,CAAA;0IAErB,iBAAiB,EAAA,CAAA,CAAA;sHAAjB,iBAAiB,EAAA,UAAA,EAAA,CAAA;sBAJ7BS,WAAQ;IAAC,YAAA,IAAA,EAAA,CAAA;wBACN,YAAY,EAAE,CAAC,oBAAoB,CAAC;wBACpC,OAAO,EAAE,CAAC,oBAAoB,CAAC;qBAClC,CAAA;;;ICPD;;IAEG;;;;;;;;;;;"}