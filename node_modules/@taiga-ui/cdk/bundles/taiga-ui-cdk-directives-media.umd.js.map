{"version":3,"file":"taiga-ui-cdk-directives-media.umd.js","sources":["../../../projects/cdk/directives/media/media.directive.ts","../../../projects/cdk/directives/media/media.module.ts","../../../projects/cdk/directives/media/taiga-ui-cdk-directives-media.ts"],"sourcesContent":["import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    Output,\n} from '@angular/core';\n\n@Directive({\n    selector: 'video[tuiMedia], audio[tuiMedia]',\n    exportAs: 'tuiMedia',\n})\nexport class TuiMediaDirective {\n    private playbackRate = 1;\n\n    @Input()\n    @HostBinding('volume')\n    volume = 1;\n\n    @Input('playbackRate')\n    set playbackRateSetter(playbackRate: number) {\n        this.updatePlaybackRate(playbackRate);\n    }\n\n    @Output()\n    readonly currentTimeChange = new EventEmitter<number>();\n\n    @Output()\n    readonly pausedChange = new EventEmitter<boolean>();\n\n    @Output()\n    readonly volumeChange = new EventEmitter<number>();\n\n    constructor(\n        @Inject(ElementRef)\n        private readonly el: ElementRef<HTMLMediaElement>,\n    ) {}\n\n    @Input()\n    set currentTime(currentTime: number) {\n        if (Math.abs(currentTime - this.currentTime) > 0.05) {\n            this.el.nativeElement.currentTime = currentTime;\n        }\n    }\n\n    get currentTime(): number {\n        return this.el.nativeElement.currentTime;\n    }\n\n    @Input()\n    set paused(paused: boolean) {\n        if (paused) {\n            this.el.nativeElement.pause();\n        } else {\n            void this.el.nativeElement.play();\n            this.updatePlaybackRate(this.playbackRate);\n        }\n    }\n\n    get paused(): boolean {\n        return this.el.nativeElement.paused;\n    }\n\n    // @bad TODO: Make sure no other events can affect this like network issues etc.\n    @HostListener('ended', ['true'])\n    @HostListener('pause', ['true'])\n    @HostListener('play', ['false'])\n    onPausedChange(paused: boolean): void {\n        this.pausedChange.emit(paused);\n        this.updatePlaybackRate(this.playbackRate);\n    }\n\n    @HostListener('volumechange')\n    onVolumeChange(): void {\n        this.volume = this.el.nativeElement.volume;\n        this.volumeChange.emit(this.volume);\n    }\n\n    @HostListener('timeupdate')\n    @HostListener('seeking')\n    @HostListener('seeked')\n    onCurrentTimeChange(): void {\n        this.currentTimeChange.emit(this.currentTime);\n    }\n\n    @HostListener('durationchange')\n    changeDetectionTrigger(): void {\n        // @bad TODO: consider if other events need to trigger CD\n    }\n\n    private updatePlaybackRate(playbackRate: number): void {\n        this.playbackRate = playbackRate;\n        this.el.nativeElement.playbackRate = this.playbackRate;\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiMediaDirective} from './media.directive';\n\n@NgModule({\n    declarations: [TuiMediaDirective],\n    exports: [TuiMediaDirective],\n})\nexport class TuiMediaModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["EventEmitter","i0","ElementRef","Directive","Inject","Input","HostBinding","Output","HostListener","NgModule"],"mappings":"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"}