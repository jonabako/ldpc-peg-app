{"version":3,"file":"taiga-ui-experimental-directives-fade.umd.js","sources":["../../../projects/experimental/directives/fade/fade.component.ts","../../../projects/experimental/directives/fade/fade.directive.ts","../../../projects/experimental/directives/fade/fade.module.ts","../../../projects/experimental/directives/fade/taiga-ui-experimental-directives-fade.ts"],"sourcesContent":["import {ChangeDetectionStrategy, Component, ViewEncapsulation} from '@angular/core';\n\n@Component({\n    template: '',\n    styleUrls: ['./fade.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    host: {\n        class: 'tui-fade-styles',\n    },\n})\nexport class TuiFadeComponent {}\n","import {\n    Directive,\n    ElementRef,\n    HostBinding,\n    Inject,\n    Input,\n    NgZone,\n    Self,\n} from '@angular/core';\nimport {\n    MUTATION_OBSERVER_INIT,\n    MutationObserverService,\n} from '@ng-web-apis/mutation-observer';\nimport {\n    TuiDestroyService,\n    TuiDirectiveStylesService,\n    TuiResizeService,\n    tuiZonefree,\n} from '@taiga-ui/cdk';\nimport {TuiOrientation} from '@taiga-ui/core';\nimport {fromEvent, merge, Observable} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\nimport {TuiFadeComponent} from './fade.component';\n\nconst BUFFER = 1; // buffer for rounding issues\n\n@Directive({\n    selector: '[tuiFade]',\n    providers: [\n        TuiDestroyService,\n        TuiResizeService,\n        MutationObserverService,\n        {\n            provide: MUTATION_OBSERVER_INIT,\n            useValue: {characterData: true, subtree: true},\n        },\n    ],\n})\nexport class TuiFadeDirective {\n    // TODO: Remove when lh CSS units are supported: https://caniuse.com/mdn-css_types_length_lh\n    @Input('tuiFadeHeight')\n    @HostBinding('style.line-height')\n    @HostBinding('style.--line-height')\n    lineHeight: string | null = null;\n\n    @Input('tuiFadeSize')\n    @HostBinding('style.--fade-size')\n    size = '1.5em';\n\n    @Input('tuiFadeOffset')\n    @HostBinding('style.--fade-offset')\n    offset = '0em';\n\n    @Input('tuiFade')\n    @HostBinding('attr.data-orientation')\n    orientation: TuiOrientation | '' = 'horizontal';\n\n    constructor(\n        @Self() @Inject(TuiDestroyService) destroy$: Observable<unknown>,\n        @Inject(TuiResizeService) resize$: Observable<unknown>,\n        @Inject(MutationObserverService) mutate$: Observable<unknown>,\n        @Inject(ElementRef) element: ElementRef<HTMLElement>,\n        @Inject(NgZone) zone: NgZone,\n        @Inject(TuiDirectiveStylesService) directiveStyles: TuiDirectiveStylesService,\n    ) {\n        const el = element.nativeElement;\n\n        directiveStyles.addComponent(TuiFadeComponent);\n        merge(resize$, mutate$, fromEvent(el, 'scroll'))\n            .pipe(tuiZonefree(zone), takeUntil(destroy$))\n            .subscribe(() => {\n                el.classList.toggle('_start', !!el.scrollLeft || !!el.scrollTop);\n                el.classList.toggle('_end', this.isEnd(el));\n            });\n    }\n\n    private isEnd(el: HTMLElement): boolean {\n        if (this.orientation === 'vertical') {\n            return Math.round(el.scrollTop) < el.scrollHeight - el.clientHeight - BUFFER;\n        }\n\n        return (\n            Math.round(el.scrollLeft) < el.scrollWidth - el.clientWidth - BUFFER ||\n            // horizontal multiline fade can kick in early due to hanging elements of fonts so using bigger buffer\n            el.scrollHeight > el.clientHeight + 4 * BUFFER\n        );\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiFadeComponent} from './fade.component';\nimport {TuiFadeDirective} from './fade.directive';\n\n@NgModule({\n    declarations: [TuiFadeComponent, TuiFadeDirective],\n    exports: [TuiFadeDirective],\n})\nexport class TuiFadeModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i0","Component","ViewEncapsulation","ChangeDetectionStrategy","merge","fromEvent","tuiZonefree","takeUntil","TuiDestroyService","TuiResizeService","MutationObserverService","ElementRef","NgZone","TuiDirectiveStylesService","MUTATION_OBSERVER_INIT","Directive","Self","Inject","Input","HostBinding","NgModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,YAAA,gBAAA,kBAAA,YAAA;QAAA,IAAA,SAAA,gBAAA,GAAA;;;;4IAAa,gBAAgB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAAA,aAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;QAAhB,gBAAA,CAAA,IAAA,GAAAA,aAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,gBAAgB,4GARf,EAAE,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,CAAA,ksHAAA,CAAA,EAAA,eAAA,EAAAA,aAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,aAAA,EAAAA,aAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA,CAAA;0HAQH,gBAAgB,EAAA,UAAA,EAAA,CAAA;0BAT5BC,YAAS;QAAC,YAAA,IAAA,EAAA,CAAA;QACP,oBAAA,QAAQ,EAAE,EAAE;4BACZ,SAAS,EAAE,CAAC,mBAAmB,CAAC;4BAChC,aAAa,EAAEC,oBAAiB,CAAC,IAAI;4BACrC,eAAe,EAAEC,0BAAuB,CAAC,MAAM;QAC/C,oBAAA,IAAI,EAAE;QACF,wBAAA,KAAK,EAAE,iBAAiB;QAC3B,qBAAA;yBACJ,CAAA;;;QCeD,IAAM,MAAM,GAAG,CAAC,CAAC;AAcjB,YAAA,gBAAA,kBAAA,YAAA;YAmBI,SACuC,gBAAA,CAAA,QAA6B,EACtC,OAA4B,EACrB,OAA4B,EACzC,OAAgC,EACpC,IAAY,EACO,eAA0C,EAAA;gBANjF,IAiBC,KAAA,GAAA,IAAA,CAAA;;QA/BD,QAAA,IAAU,CAAA,UAAA,GAAkB,IAAI,CAAC;QAIjC,QAAA,IAAI,CAAA,IAAA,GAAG,OAAO,CAAC;QAIf,QAAA,IAAM,CAAA,MAAA,GAAG,KAAK,CAAC;QAIf,QAAA,IAAW,CAAA,WAAA,GAAwB,YAAY,CAAC;QAU5C,QAAA,IAAM,EAAE,GAAG,OAAO,CAAC,aAAa,CAAC;QAEjC,QAAA,eAAe,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;gBAC/CC,QAAK,CAAC,OAAO,EAAE,OAAO,EAAEC,YAAS,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;qBAC3C,IAAI,CAACC,cAAW,CAAC,IAAI,CAAC,EAAEC,mBAAS,CAAC,QAAQ,CAAC,CAAC;QAC5C,aAAA,SAAS,CAAC,YAAA;QACP,YAAA,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,IAAI,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACjE,YAAA,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QAChD,SAAC,CAAC,CAAC;aACV;YAEO,gBAAK,CAAA,SAAA,CAAA,KAAA,GAAL,UAAM,EAAe,EAAA;QACzB,QAAA,IAAI,IAAI,CAAC,WAAW,KAAK,UAAU,EAAE;QACjC,YAAA,OAAO,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,YAAY,GAAG,EAAE,CAAC,YAAY,GAAG,MAAM,CAAC;QAChF,SAAA;QAED,QAAA,QACI,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,WAAW,GAAG,EAAE,CAAC,WAAW,GAAG,MAAM;;oBAEpE,EAAE,CAAC,YAAY,GAAG,EAAE,CAAC,YAAY,GAAG,CAAC,GAAG,MAAM,EAChD;aACL,CAAA;;;4IAhDQ,gBAAgB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAoBLC,oBAAiB,EAAA,IAAA,EAAA,IAAA,EAAA,EAAA,EAAA,KAAA,EACzBC,mBAAgB,EAAA,EAAA,EAAA,KAAA,EAChBC,wCAAuB,EAAA,EAAA,EAAA,KAAA,EACvBC,aAAU,EAAA,EAAA,EAAA,KAAA,EACVC,SAAM,EAAA,EAAA,EAAA,KAAA,EACNC,4BAAyB,EAAA,CAAA,EAAA,MAAA,EAAAb,aAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;QAzB5B,gBAAA,CAAA,IAAA,GAAAA,aAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,gBAAgB,EAVd,QAAA,EAAA,WAAA,EAAA,MAAA,EAAA,EAAA,UAAA,EAAA,CAAA,eAAA,EAAA,YAAA,CAAA,EAAA,IAAA,EAAA,CAAA,aAAA,EAAA,MAAA,CAAA,EAAA,MAAA,EAAA,CAAA,eAAA,EAAA,QAAA,CAAA,EAAA,WAAA,EAAA,CAAA,SAAA,EAAA,aAAA,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,EAAA,mBAAA,EAAA,iBAAA,EAAA,qBAAA,EAAA,iBAAA,EAAA,mBAAA,EAAA,WAAA,EAAA,qBAAA,EAAA,aAAA,EAAA,uBAAA,EAAA,kBAAA,EAAA,EAAA,EAAA,SAAA,EAAA;gBACPQ,oBAAiB;gBACjBC,mBAAgB;gBAChBC,wCAAuB;QACvB,QAAA;QACI,YAAA,OAAO,EAAEI,uCAAsB;oBAC/B,QAAQ,EAAE,EAAC,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC;QACjD,SAAA;QACJ,KAAA,EAAA,QAAA,EAAAd,aAAA,EAAA,CAAA,CAAA;0HAEQ,gBAAgB,EAAA,UAAA,EAAA,CAAA;0BAZ5Be,YAAS;QAAC,YAAA,IAAA,EAAA,CAAA;QACP,oBAAA,QAAQ,EAAE,WAAW;QACrB,oBAAA,SAAS,EAAE;gCACPP,oBAAiB;gCACjBC,mBAAgB;gCAChBC,wCAAuB;QACvB,wBAAA;QACI,4BAAA,OAAO,EAAEI,uCAAsB;oCAC/B,QAAQ,EAAE,EAAC,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC;QACjD,yBAAA;QACJ,qBAAA;yBACJ,CAAA;;;sCAqBQE,OAAI;;sCAAIC,SAAM;uCAACT,oBAAiB,CAAA;;sCAChCS,SAAM;uCAACR,mBAAgB,CAAA;;sCACvBQ,SAAM;uCAACP,wCAAuB,CAAA;;sCAC9BO,SAAM;uCAACN,aAAU,CAAA;;sCACjBM,SAAM;uCAACL,SAAM,CAAA;;sCACbK,SAAM;uCAACJ,4BAAyB,CAAA;;iCApBrC,UAAU,EAAA,CAAA;8BAHTK,QAAK;+BAAC,eAAe,CAAA;;8BACrBC,cAAW;+BAAC,mBAAmB,CAAA;;8BAC/BA,cAAW;+BAAC,qBAAqB,CAAA;wBAKlC,IAAI,EAAA,CAAA;8BAFHD,QAAK;+BAAC,aAAa,CAAA;;8BACnBC,cAAW;+BAAC,mBAAmB,CAAA;wBAKhC,MAAM,EAAA,CAAA;8BAFLD,QAAK;+BAAC,eAAe,CAAA;;8BACrBC,cAAW;+BAAC,qBAAqB,CAAA;wBAKlC,WAAW,EAAA,CAAA;8BAFVD,QAAK;+BAAC,SAAS,CAAA;;8BACfC,cAAW;+BAAC,uBAAuB,CAAA;;;AC9CxC,YAAA,aAAA,kBAAA,YAAA;QAAA,IAAA,SAAA,aAAA,GAAA;;;;yIAAa,aAAa,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAAnB,aAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;QAAb,aAAA,CAAA,IAAA,GAAAA,aAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAAA,aAAA,EAAA,IAAA,EAAA,aAAa,EAHP,YAAA,EAAA,CAAA,gBAAgB,EAAE,gBAAgB,aACvC,gBAAgB,CAAA,EAAA,CAAA,CAAA;0IAEjB,aAAa,EAAA,CAAA,CAAA;0HAAb,aAAa,EAAA,UAAA,EAAA,CAAA;0BAJzBoB,WAAQ;QAAC,YAAA,IAAA,EAAA,CAAA;QACN,oBAAA,YAAY,EAAE,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;4BAClD,OAAO,EAAE,CAAC,gBAAgB,CAAC;yBAC9B,CAAA;;;QCRD;;QAEG;;;;;;;;;;;;"}