{"version":3,"file":"taiga-ui-experimental-pipes-fallback-src.js","sources":["../../../projects/experimental/pipes/fallback-src/fallback-src.pipe.ts","../../../projects/experimental/pipes/fallback-src/fallback-src.module.ts","../../../projects/experimental/pipes/fallback-src/taiga-ui-experimental-pipes-fallback-src.ts"],"sourcesContent":["import {ElementRef, Inject, Pipe, PipeTransform} from '@angular/core';\nimport {TUI_ICON_ERROR} from '@taiga-ui/core';\nimport {fromEvent, merge, Observable} from 'rxjs';\nimport {map, startWith} from 'rxjs/operators';\n\n@Pipe({\n    name: 'tuiFallbackSrc',\n})\nexport class TuiFallbackSrcPipe implements PipeTransform {\n    constructor(@Inject(ElementRef) private readonly el: ElementRef<HTMLElement>) {}\n\n    transform(src: string, fallback: string): Observable<string> {\n        return merge(\n            fromEvent(this.el.nativeElement, TUI_ICON_ERROR),\n            fromEvent(this.el.nativeElement, 'error', {capture: true}),\n        ).pipe(\n            map(() => fallback),\n            startWith(src),\n        );\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiFallbackSrcPipe} from './fallback-src.pipe';\n\n@NgModule({\n    declarations: [TuiFallbackSrcPipe],\n    exports: [TuiFallbackSrcPipe],\n})\nexport class TuiFallbackSrcModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;MAQa,kBAAkB,CAAA;AAC3B,IAAA,WAAA,CAAiD,EAA2B,EAAA;QAA3B,IAAE,CAAA,EAAA,GAAF,EAAE,CAAyB;KAAI;IAEhF,SAAS,CAAC,GAAW,EAAE,QAAgB,EAAA;QACnC,OAAO,KAAK,CACR,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,cAAc,CAAC,EAChD,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,OAAO,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAC7D,CAAC,IAAI,CACF,GAAG,CAAC,MAAM,QAAQ,CAAC,EACnB,SAAS,CAAC,GAAG,CAAC,CACjB,CAAC;KACL;;AAXQ,kBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,kBAAkB,kBACP,UAAU,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,IAAA,EAAA,CAAA,CAAA;8GADrB,kBAAkB,EAAA,IAAA,EAAA,gBAAA,EAAA,CAAA,CAAA;4FAAlB,kBAAkB,EAAA,UAAA,EAAA,CAAA;kBAH9B,IAAI;AAAC,YAAA,IAAA,EAAA,CAAA;AACF,oBAAA,IAAI,EAAE,gBAAgB;AACzB,iBAAA,CAAA;;0BAEgB,MAAM;2BAAC,UAAU,CAAA;;;MCDrB,oBAAoB,CAAA;;kHAApB,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;mHAApB,oBAAoB,EAAA,YAAA,EAAA,CAHd,kBAAkB,CAAA,EAAA,OAAA,EAAA,CACvB,kBAAkB,CAAA,EAAA,CAAA,CAAA;mHAEnB,oBAAoB,EAAA,CAAA,CAAA;4FAApB,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAJhC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;oBACN,YAAY,EAAE,CAAC,kBAAkB,CAAC;oBAClC,OAAO,EAAE,CAAC,kBAAkB,CAAC;AAChC,iBAAA,CAAA;;;ACPD;;AAEG;;;;"}