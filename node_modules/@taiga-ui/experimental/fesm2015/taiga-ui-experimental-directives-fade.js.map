{"version":3,"file":"taiga-ui-experimental-directives-fade.js","sources":["../../../projects/experimental/directives/fade/fade.component.ts","../../../projects/experimental/directives/fade/fade.directive.ts","../../../projects/experimental/directives/fade/fade.module.ts","../../../projects/experimental/directives/fade/taiga-ui-experimental-directives-fade.ts"],"sourcesContent":["import {ChangeDetectionStrategy, Component, ViewEncapsulation} from '@angular/core';\n\n@Component({\n    template: '',\n    styleUrls: ['./fade.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    host: {\n        class: 'tui-fade-styles',\n    },\n})\nexport class TuiFadeComponent {}\n","import {\n    Directive,\n    ElementRef,\n    HostBinding,\n    Inject,\n    Input,\n    NgZone,\n    Self,\n} from '@angular/core';\nimport {\n    MUTATION_OBSERVER_INIT,\n    MutationObserverService,\n} from '@ng-web-apis/mutation-observer';\nimport {\n    TuiDestroyService,\n    TuiDirectiveStylesService,\n    TuiResizeService,\n    tuiZonefree,\n} from '@taiga-ui/cdk';\nimport {TuiOrientation} from '@taiga-ui/core';\nimport {fromEvent, merge, Observable} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\nimport {TuiFadeComponent} from './fade.component';\n\nconst BUFFER = 1; // buffer for rounding issues\n\n@Directive({\n    selector: '[tuiFade]',\n    providers: [\n        TuiDestroyService,\n        TuiResizeService,\n        MutationObserverService,\n        {\n            provide: MUTATION_OBSERVER_INIT,\n            useValue: {characterData: true, subtree: true},\n        },\n    ],\n})\nexport class TuiFadeDirective {\n    // TODO: Remove when lh CSS units are supported: https://caniuse.com/mdn-css_types_length_lh\n    @Input('tuiFadeHeight')\n    @HostBinding('style.line-height')\n    @HostBinding('style.--line-height')\n    lineHeight: string | null = null;\n\n    @Input('tuiFadeSize')\n    @HostBinding('style.--fade-size')\n    size = '1.5em';\n\n    @Input('tuiFadeOffset')\n    @HostBinding('style.--fade-offset')\n    offset = '0em';\n\n    @Input('tuiFade')\n    @HostBinding('attr.data-orientation')\n    orientation: TuiOrientation | '' = 'horizontal';\n\n    constructor(\n        @Self() @Inject(TuiDestroyService) destroy$: Observable<unknown>,\n        @Inject(TuiResizeService) resize$: Observable<unknown>,\n        @Inject(MutationObserverService) mutate$: Observable<unknown>,\n        @Inject(ElementRef) element: ElementRef<HTMLElement>,\n        @Inject(NgZone) zone: NgZone,\n        @Inject(TuiDirectiveStylesService) directiveStyles: TuiDirectiveStylesService,\n    ) {\n        const el = element.nativeElement;\n\n        directiveStyles.addComponent(TuiFadeComponent);\n        merge(resize$, mutate$, fromEvent(el, 'scroll'))\n            .pipe(tuiZonefree(zone), takeUntil(destroy$))\n            .subscribe(() => {\n                el.classList.toggle('_start', !!el.scrollLeft || !!el.scrollTop);\n                el.classList.toggle('_end', this.isEnd(el));\n            });\n    }\n\n    private isEnd(el: HTMLElement): boolean {\n        if (this.orientation === 'vertical') {\n            return Math.round(el.scrollTop) < el.scrollHeight - el.clientHeight - BUFFER;\n        }\n\n        return (\n            Math.round(el.scrollLeft) < el.scrollWidth - el.clientWidth - BUFFER ||\n            // horizontal multiline fade can kick in early due to hanging elements of fonts so using bigger buffer\n            el.scrollHeight > el.clientHeight + 4 * BUFFER\n        );\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiFadeComponent} from './fade.component';\nimport {TuiFadeDirective} from './fade.directive';\n\n@NgModule({\n    declarations: [TuiFadeComponent, TuiFadeDirective],\n    exports: [TuiFadeDirective],\n})\nexport class TuiFadeModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}