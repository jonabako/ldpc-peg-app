import { ChangeDetectionStrategy, Component, Inject, NgZone } from '@angular/core';
import { tuiClamp } from '@taiga-ui/cdk';
import { tuiZonefulMap } from '@taiga-ui/core';
import { TUI_SHEET, TUI_SHEET_SCROLL } from '../../sheet-tokens';
import * as i0 from "@angular/core";
import * as i1 from "@taiga-ui/cdk";
import * as i2 from "@angular/common";
import * as i3 from "rxjs";
export class TuiSheetBarComponent {
    constructor(sheet, scroll$, zone) {
        this.sheet = sheet;
        this.scroll$ = scroll$;
        this.zone = zone;
        this.rotate$ = this.scroll$.pipe(tuiZonefulMap(y => tuiClamp(10 - (y - this.stop) / 5, 0, 10), this.zone));
    }
    get stop() {
        return this.sheet.stops[0] || 0;
    }
}
TuiSheetBarComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: TuiSheetBarComponent, deps: [{ token: TUI_SHEET }, { token: TUI_SHEET_SCROLL }, { token: NgZone }], target: i0.ɵɵFactoryTarget.Component });
TuiSheetBarComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: TuiSheetBarComponent, selector: "tui-sheet-bar", ngImport: i0, template: "<ng-container *tuiLet=\"rotate$ | async as deg\">\n    <div\n        class=\"t-bar\"\n        [ngStyle]=\"{transform: 'rotate(-' + deg + 'deg)'}\"\n    ></div>\n    <ng-content *ngIf=\"deg\"></ng-content>\n    <div\n        class=\"t-bar\"\n        [ngStyle]=\"{transform: 'rotate(' + deg + 'deg)'}\"\n    ></div>\n</ng-container>\n", styles: [":host{transition-property:border-radius;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:-webkit-sticky;position:sticky;top:0;z-index:2;display:flex;height:1.25rem;align-items:center;justify-content:center;opacity:.3}.t-bar{content:\"\";height:.25rem;width:1rem;background:var(--tui-base-09);pointer-events:none}:host-context(._ios:not(._dragged)) .t-bar{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-bar:first-child{border-radius:1rem 0 0 1rem;transform-origin:top right}.t-bar:last-child{border-radius:0 1rem 1rem 0;transform-origin:top left}\n"], directives: [{ type: i1.TuiLetDirective, selector: "[tuiLet]", inputs: ["tuiLet"] }, { type: i2.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], pipes: { "async": i2.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: TuiSheetBarComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'tui-sheet-bar',
                    templateUrl: './sheet-bar.template.html',
                    styleUrls: ['./sheet-bar.style.less'],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [TUI_SHEET]
                }] }, { type: i3.Observable, decorators: [{
                    type: Inject,
                    args: [TUI_SHEET_SCROLL]
                }] }, { type: i0.NgZone, decorators: [{
                    type: Inject,
                    args: [NgZone]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hlZXQtYmFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FkZG9uLW1vYmlsZS9jb21wb25lbnRzL3NoZWV0L2NvbXBvbmVudHMvc2hlZXQtYmFyL3NoZWV0LWJhci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hZGRvbi1tb2JpbGUvY29tcG9uZW50cy9zaGVldC9jb21wb25lbnRzL3NoZWV0LWJhci9zaGVldC1iYXIudGVtcGxhdGUuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDakYsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN2QyxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFJN0MsT0FBTyxFQUFDLFNBQVMsRUFBRSxnQkFBZ0IsRUFBQyxNQUFNLG9CQUFvQixDQUFDOzs7OztBQVEvRCxNQUFNLE9BQU8sb0JBQW9CO0lBSzdCLFlBQ3dDLEtBQTRCLEVBQ3JCLE9BQTJCLEVBQ3JDLElBQVk7UUFGVCxVQUFLLEdBQUwsS0FBSyxDQUF1QjtRQUNyQixZQUFPLEdBQVAsT0FBTyxDQUFvQjtRQUNyQyxTQUFJLEdBQUosSUFBSSxDQUFRO1FBUHhDLFlBQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FDaEMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQzNFLENBQUM7SUFNQyxDQUFDO0lBRUosSUFBWSxJQUFJO1FBQ1osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEMsQ0FBQzs7a0hBYlEsb0JBQW9CLGtCQU1qQixTQUFTLGFBQ1QsZ0JBQWdCLGFBQ2hCLE1BQU07c0dBUlQsb0JBQW9CLHFEQ2RqQyw4VUFXQTs0RkRHYSxvQkFBb0I7a0JBTmhDLFNBQVM7bUJBQUM7b0JBQ1AsUUFBUSxFQUFFLGVBQWU7b0JBQ3pCLFdBQVcsRUFBRSwyQkFBMkI7b0JBQ3hDLFNBQVMsRUFBRSxDQUFDLHdCQUF3QixDQUFDO29CQUNyQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtpQkFDbEQ7OzBCQU9RLE1BQU07MkJBQUMsU0FBUzs7MEJBQ2hCLE1BQU07MkJBQUMsZ0JBQWdCOzswQkFDdkIsTUFBTTsyQkFBQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBJbmplY3QsIE5nWm9uZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge3R1aUNsYW1wfSBmcm9tICdAdGFpZ2EtdWkvY2RrJztcbmltcG9ydCB7dHVpWm9uZWZ1bE1hcH0gZnJvbSAnQHRhaWdhLXVpL2NvcmUnO1xuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHtUdWlTaGVldFJlcXVpcmVkUHJvcHN9IGZyb20gJy4uLy4uL3NoZWV0JztcbmltcG9ydCB7VFVJX1NIRUVULCBUVUlfU0hFRVRfU0NST0xMfSBmcm9tICcuLi8uLi9zaGVldC10b2tlbnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3R1aS1zaGVldC1iYXInLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zaGVldC1iYXIudGVtcGxhdGUuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vc2hlZXQtYmFyLnN0eWxlLmxlc3MnXSxcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgVHVpU2hlZXRCYXJDb21wb25lbnQge1xuICAgIHJlYWRvbmx5IHJvdGF0ZSQgPSB0aGlzLnNjcm9sbCQucGlwZShcbiAgICAgICAgdHVpWm9uZWZ1bE1hcCh5ID0+IHR1aUNsYW1wKDEwIC0gKHkgLSB0aGlzLnN0b3ApIC8gNSwgMCwgMTApLCB0aGlzLnpvbmUpLFxuICAgICk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgQEluamVjdChUVUlfU0hFRVQpIHByaXZhdGUgcmVhZG9ubHkgc2hlZXQ6IFR1aVNoZWV0UmVxdWlyZWRQcm9wcyxcbiAgICAgICAgQEluamVjdChUVUlfU0hFRVRfU0NST0xMKSBwcml2YXRlIHJlYWRvbmx5IHNjcm9sbCQ6IE9ic2VydmFibGU8bnVtYmVyPixcbiAgICAgICAgQEluamVjdChOZ1pvbmUpIHByaXZhdGUgcmVhZG9ubHkgem9uZTogTmdab25lLFxuICAgICkge31cblxuICAgIHByaXZhdGUgZ2V0IHN0b3AoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hlZXQuc3RvcHNbMF0gfHwgMDtcbiAgICB9XG59XG4iLCI8bmctY29udGFpbmVyICp0dWlMZXQ9XCJyb3RhdGUkIHwgYXN5bmMgYXMgZGVnXCI+XG4gICAgPGRpdlxuICAgICAgICBjbGFzcz1cInQtYmFyXCJcbiAgICAgICAgW25nU3R5bGVdPVwie3RyYW5zZm9ybTogJ3JvdGF0ZSgtJyArIGRlZyArICdkZWcpJ31cIlxuICAgID48L2Rpdj5cbiAgICA8bmctY29udGVudCAqbmdJZj1cImRlZ1wiPjwvbmctY29udGVudD5cbiAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwidC1iYXJcIlxuICAgICAgICBbbmdTdHlsZV09XCJ7dHJhbnNmb3JtOiAncm90YXRlKCcgKyBkZWcgKyAnZGVnKSd9XCJcbiAgICA+PC9kaXY+XG48L25nLWNvbnRhaW5lcj5cbiJdfQ==