{"version":3,"file":"taiga-ui-addon-mobile-components-pull-to-refresh.js","sources":["../../../projects/addon-mobile/components/pull-to-refresh/loader-ios/loader-ios.component.ts","../../../projects/addon-mobile/components/pull-to-refresh/loader-ios/loader-ios.template.html","../../../projects/addon-mobile/components/pull-to-refresh/pull-to-refresh.providers.ts","../../../projects/addon-mobile/components/pull-to-refresh/pull-to-refresh.service.ts","../../../projects/addon-mobile/components/pull-to-refresh/loader-android/loader-android.component.ts","../../../projects/addon-mobile/components/pull-to-refresh/loader-android/loader-android.template.html","../../../projects/addon-mobile/components/pull-to-refresh/pull-to-refresh.component.ts","../../../projects/addon-mobile/components/pull-to-refresh/pull-to-refresh.template.html","../../../projects/addon-mobile/components/pull-to-refresh/pull-to-refresh.module.ts","../../../projects/addon-mobile/components/pull-to-refresh/taiga-ui-addon-mobile-components-pull-to-refresh.ts"],"sourcesContent":["import {ChangeDetectionStrategy, Component, Inject} from '@angular/core';\nimport {TuiContextWithImplicit} from '@taiga-ui/cdk';\nimport {POLYMORPHEUS_CONTEXT, PolymorpheusComponent} from '@tinkoff/ng-polymorpheus';\n\nimport {TUI_PULL_TO_REFRESH_THRESHOLD} from '../pull-to-refresh.providers';\n\nconst LOADED_STEP = 8;\nconst ROTATE_X_STEP = 30;\n\n@Component({\n    selector: 'tui-mobile-ios-loader',\n    templateUrl: './loader-ios.template.html',\n    styleUrls: ['./loader-ios.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiMobileLoaderIOSComponent {\n    readonly steps = 12;\n\n    constructor(\n        @Inject(POLYMORPHEUS_CONTEXT)\n        private readonly context: TuiContextWithImplicit<number>,\n        @Inject(TUI_PULL_TO_REFRESH_THRESHOLD) private readonly threshold: number,\n    ) {}\n\n    get finished(): boolean {\n        return this.percent >= 100;\n    }\n\n    get percent(): number {\n        return (this.context.$implicit * 100) / this.threshold;\n    }\n\n    isShown(index: number): boolean {\n        return this.percent > (index + 1) * LOADED_STEP;\n    }\n\n    calculateTransform(index: number): string {\n        return `rotate(${index * ROTATE_X_STEP} 50 50)`;\n    }\n\n    calculateAnimationBegin(index: number): string {\n        return `${(index * LOADED_STEP) / 100}s`;\n    }\n}\n\nexport const TUI_IOS_LOADER = new PolymorpheusComponent(TuiMobileLoaderIOSComponent);\n","<svg\n    height=\"36\"\n    preserveAspectRatio=\"xMidYMid\"\n    viewBox=\"0 0 100 100\"\n    width=\"36\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n>\n    <ng-container *tuiRepeatTimes=\"let index of steps\">\n        <g\n            *ngIf=\"isShown(index)\"\n            [attr.transform]=\"calculateTransform(index)\"\n        >\n            <rect\n                fill=\"#c7c9cc\"\n                height=\"16\"\n                rx=\"7.05\"\n                ry=\"3.3\"\n                width=\"6\"\n                x=\"47\"\n                y=\"22\"\n            >\n                <animate\n                    *ngIf=\"finished\"\n                    attributeName=\"opacity\"\n                    dur=\"1s\"\n                    keyTimes=\"0;1\"\n                    repeatCount=\"indefinite\"\n                    values=\"1;0\"\n                    [attr.begin]=\"calculateAnimationBegin(index)\"\n                ></animate>\n            </rect>\n        </g>\n    </ng-container>\n</svg>\n","import {inject} from '@angular/core';\nimport {\n    TUI_IS_IOS,\n    TuiContextWithImplicit,\n    tuiCreateToken,\n    tuiCreateTokenFromFactory,\n} from '@taiga-ui/cdk';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {EMPTY, Observable} from 'rxjs';\n\nimport {TUI_ANDROID_LOADER} from './loader-android/loader-android.component';\nimport {TUI_IOS_LOADER} from './loader-ios/loader-ios.component';\n\n/**\n * Stream that emits when loading is over\n */\nexport const TUI_PULL_TO_REFRESH_LOADED = tuiCreateToken<Observable<unknown>>(EMPTY);\n\n/**\n * Pull threshold in pixels until loading starts\n */\nexport const TUI_PULL_TO_REFRESH_THRESHOLD = tuiCreateToken(50);\n\n/**\n * Loading indicator component that gets current pull distance in pixels as context\n */\nexport const TUI_PULL_TO_REFRESH_COMPONENT = tuiCreateTokenFromFactory<\n    PolymorpheusContent<TuiContextWithImplicit<number>>\n>(() => (inject(TUI_IS_IOS) ? TUI_IOS_LOADER : TUI_ANDROID_LOADER));\n\n/**\n * @deprecated renamed to {@link TUI_PULL_TO_REFRESH_LOADED}\n */\nexport const TUI_LOADED = TUI_PULL_TO_REFRESH_LOADED;\n","import {ElementRef, Inject, Injectable} from '@angular/core';\nimport {TUI_SCROLL_REF, tuiScrollFrom, tuiTypedFromEvent} from '@taiga-ui/cdk';\nimport {EMPTY, Observable} from 'rxjs';\nimport {\n    distinctUntilChanged,\n    endWith,\n    filter,\n    map,\n    scan,\n    share,\n    startWith,\n    switchMap,\n    takeUntil,\n    takeWhile,\n    tap,\n} from 'rxjs/operators';\n\nimport {\n    TUI_PULL_TO_REFRESH_COMPONENT,\n    TUI_PULL_TO_REFRESH_LOADED,\n    TUI_PULL_TO_REFRESH_THRESHOLD,\n} from './pull-to-refresh.providers';\n\nexport const MICRO_OFFSET = 10 ** -6;\n\n@Injectable()\nexport class TuiPullToRefreshService extends Observable<number> {\n    // Hack for iOS to determine if pulling stopped due to scroll\n    // because Safari does not support `touch-action: pan-down`\n    private touched = false;\n\n    private readonly pulling$ = this.loaded$.pipe(\n        startWith(null),\n        switchMap(() =>\n            tuiTypedFromEvent(this.element, 'touchstart', {passive: true}).pipe(\n                filter(() => !this.scrollTop),\n                map(({touches}) => touches[0].clientY),\n                switchMap(start =>\n                    tuiTypedFromEvent(this.element, 'touchmove').pipe(\n                        tap((): void => {\n                            this.touched = true;\n                        }),\n                        map(({touches}) => touches[0].clientY - start),\n                        filter(distance => distance > 0),\n                        takeUntil(\n                            tuiTypedFromEvent(this.element, 'touchend').pipe(\n                                tap((): void => {\n                                    this.touched = false;\n                                }),\n                            ),\n                        ),\n                        takeUntil(tuiScrollFrom(this.scrollRef.nativeElement)),\n                        endWith(0),\n                    ),\n                ),\n                scan(\n                    (prev, current) =>\n                        !current && !this.touched && prev > this.threshold\n                            ? this.threshold\n                            : current + current * MICRO_OFFSET,\n                    0,\n                ),\n                takeWhile(distance => distance !== this.threshold, true),\n                startWith(0),\n            ),\n        ),\n        distinctUntilChanged(),\n        share(),\n    );\n\n    constructor(\n        @Inject(ElementRef) private readonly el: ElementRef<HTMLElement>,\n        @Inject(TUI_SCROLL_REF) private readonly scrollRef: ElementRef<HTMLElement>,\n        @Inject(TUI_PULL_TO_REFRESH_LOADED) private readonly loaded$: Observable<unknown>,\n        @Inject(TUI_PULL_TO_REFRESH_THRESHOLD) private readonly threshold: number,\n        @Inject(TUI_PULL_TO_REFRESH_COMPONENT) component: unknown,\n    ) {\n        super(subscriber => (component ? this.pulling$ : EMPTY).subscribe(subscriber));\n    }\n\n    private get element(): HTMLElement {\n        return this.el.nativeElement;\n    }\n\n    private get scrollTop(): number {\n        return this.scrollRef.nativeElement.scrollTop;\n    }\n}\n","import {ChangeDetectionStrategy, Component, HostBinding, Inject} from '@angular/core';\nimport {TuiContextWithImplicit} from '@taiga-ui/cdk';\nimport {POLYMORPHEUS_CONTEXT, PolymorpheusComponent} from '@tinkoff/ng-polymorpheus';\n\nimport {TUI_PULL_TO_REFRESH_THRESHOLD} from '../pull-to-refresh.providers';\nimport {MICRO_OFFSET} from '../pull-to-refresh.service';\n\nconst ROTATE_X_DEFAULT = 180;\nconst ROTATE_X_MAX = 500;\nconst ROTATE_X_MULTIPLIER = 2.3;\n\n@Component({\n    selector: 'tui-mobile-android-loader',\n    templateUrl: './loader-android.template.html',\n    styleUrls: ['./loader-android.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiMobileLoaderAndroidComponent {\n    constructor(\n        @Inject(POLYMORPHEUS_CONTEXT)\n        private readonly context: TuiContextWithImplicit<number>,\n        @Inject(TUI_PULL_TO_REFRESH_THRESHOLD) private readonly threshold: number,\n    ) {}\n\n    get transform(): string {\n        const rotateX = Math.min(\n            ROTATE_X_DEFAULT + this.percent * ROTATE_X_MULTIPLIER,\n            ROTATE_X_MAX,\n        );\n\n        return `rotate(${rotateX} 0 0)`;\n    }\n\n    @HostBinding('class._visible')\n    get percent(): number {\n        return (this.context.$implicit * 100) / this.threshold;\n    }\n\n    get opacity(): number {\n        return this.context.$implicit / (this.threshold * 1.5);\n    }\n\n    @HostBinding('class._dropped')\n    get dropped(): boolean {\n        return (\n            this.context.$implicit <= MICRO_OFFSET ||\n            this.context.$implicit === this.threshold\n        );\n    }\n\n    @HostBinding('style.transform')\n    get hostTransform(): string {\n        return `translateY(${Math.min(this.context.$implicit, this.threshold * 1.5)}px)`;\n    }\n}\n\nexport const TUI_ANDROID_LOADER = new PolymorpheusComponent(\n    TuiMobileLoaderAndroidComponent,\n);\n","<div class=\"t-wrapper\">\n    <svg\n        *ngIf=\"percent !== 100; else loading\"\n        fill=\"none\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n        width=\"24\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        [attr.transform]=\"transform\"\n        [style.opacity]=\"opacity\"\n    >\n        <defs>\n            <mask id=\"mask-1\">\n                <path\n                    clip-rule=\"evenodd\"\n                    d=\"M21 12C21 7.03 16.97 3 12 3C7.03 3 3 7.03 3 12C3 16.97 7.03 21 12 21C14.06 21 15.96 20.3 17.48 19.14L16.06 17.7C14.91 18.51 13.51 19 12 19C8.13 19 5 15.87 5 12C5 8.13 8.13 5 12 5C15.87 5 19 8.13 19 12H16L20 16L24 12H21Z\"\n                    fill=\"white\"\n                    fill-rule=\"evenodd\"\n                />\n            </mask>\n        </defs>\n        <g mask=\"url(#mask-1)\">\n            <path\n                clip-rule=\"evenodd\"\n                d=\"M21 12C21 7.03 16.97 3 12 3C7.03 3 3 7.03 3 12C3 16.97 7.03 21 12 21C14.06 21 15.96 20.3 17.48 19.14L16.06 17.7C14.91 18.51 13.51 19 12 19C8.13 19 5 15.87 5 12C5 8.13 8.13 5 12 5C15.87 5 19 8.13 19 12H16L20 16L24 12H21Z\"\n                fill=\"black\"\n                fill-rule=\"evenodd\"\n            />\n        </g>\n    </svg>\n</div>\n<ng-template #loading>\n    <tui-loader\n        size=\"s\"\n        class=\"t-loader\"\n        [inheritColor]=\"true\"\n    ></tui-loader>\n</ng-template>\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    Inject,\n    Input,\n    NgZone,\n    Output,\n    Self,\n} from '@angular/core';\nimport {\n    TUI_IS_IOS,\n    TUI_SCROLL_REF,\n    TuiContextWithImplicit,\n    TuiDestroyService,\n    TuiHandler,\n    tuiPx,\n    tuiScrollFrom,\n    tuiZonefree,\n} from '@taiga-ui/cdk';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable} from 'rxjs';\nimport {distinctUntilChanged, filter, map, startWith, takeUntil} from 'rxjs/operators';\n\nimport {\n    TUI_PULL_TO_REFRESH_COMPONENT,\n    TUI_PULL_TO_REFRESH_THRESHOLD,\n} from './pull-to-refresh.providers';\nimport {MICRO_OFFSET, TuiPullToRefreshService} from './pull-to-refresh.service';\n\n@Component({\n    selector: 'tui-pull-to-refresh',\n    templateUrl: './pull-to-refresh.template.html',\n    styleUrls: ['./pull-to-refresh.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiPullToRefreshService, TuiDestroyService],\n})\nexport class TuiPullToRefreshComponent {\n    @Input()\n    styleHandler: TuiHandler<number, Record<string, any> | null> = this.isIOS\n        ? distance => ({top: tuiPx(distance / 2)})\n        : () => null;\n\n    @Output()\n    readonly pulled: Observable<unknown> = this.pulling$.pipe(\n        filter(distance => distance === this.threshold),\n    );\n\n    readonly dropped$: Observable<boolean> = this.pulling$.pipe(\n        map(distance => distance <= MICRO_OFFSET || distance === this.threshold),\n        distinctUntilChanged(),\n    );\n\n    constructor(\n        @Inject(NgZone) zone: NgZone,\n        @Inject(TuiDestroyService) @Self() destroy$: Observable<unknown>,\n        @Inject(TUI_SCROLL_REF) {nativeElement}: ElementRef<HTMLElement>,\n        @Inject(TUI_IS_IOS) private readonly isIOS: boolean,\n        @Inject(TUI_PULL_TO_REFRESH_THRESHOLD) private readonly threshold: number,\n        @Inject(TUI_PULL_TO_REFRESH_COMPONENT)\n        readonly component: PolymorpheusContent<TuiContextWithImplicit<number>>,\n        @Inject(TuiPullToRefreshService) readonly pulling$: Observable<number>,\n    ) {\n        // Ensure scrolling down is impossible while pulling\n        if (this.component) {\n            tuiScrollFrom(nativeElement)\n                .pipe(startWith(null), tuiZonefree(zone), takeUntil(destroy$))\n                .subscribe(() => {\n                    if (nativeElement.scrollTop) {\n                        nativeElement.style.touchAction = '';\n                    } else {\n                        nativeElement.style.touchAction = 'pan-down';\n                    }\n                });\n        }\n    }\n}\n","<ng-container *polymorpheusOutlet=\"component; context: {$implicit: (pulling$ | async) || 0}\"></ng-container>\n\n<div\n    [class.t-drop]=\"dropped$ | async\"\n    [ngStyle]=\"styleHandler((pulling$ | async) || 0)\"\n    [style.position]=\"'relative'\"\n>\n    <ng-content></ng-content>\n</div>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiRepeatTimesModule} from '@taiga-ui/cdk';\nimport {TuiLoaderModule, TuiSvgModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiMobileLoaderAndroidComponent} from './loader-android/loader-android.component';\nimport {TuiMobileLoaderIOSComponent} from './loader-ios/loader-ios.component';\nimport {TuiPullToRefreshComponent} from './pull-to-refresh.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        TuiLoaderModule,\n        TuiSvgModule,\n        TuiRepeatTimesModule,\n        PolymorpheusModule,\n    ],\n    declarations: [\n        TuiPullToRefreshComponent,\n        TuiMobileLoaderAndroidComponent,\n        TuiMobileLoaderIOSComponent,\n    ],\n    exports: [TuiPullToRefreshComponent],\n})\nexport class TuiPullToRefreshModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1"],"mappings":"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"}