{"version":3,"file":"taiga-ui-core-observables.umd.js","sources":["../../../projects/core/observables/smart-search.ts","../../../projects/core/observables/zoneful-map.ts","../../../projects/core/observables/taiga-ui-core-observables.ts"],"sourcesContent":["import {EMPTY_ARRAY} from '@taiga-ui/cdk';\nimport {Observable, OperatorFunction} from 'rxjs';\nimport {\n    debounceTime,\n    distinctUntilChanged,\n    scan,\n    startWith,\n    switchMap,\n} from 'rxjs/operators';\n\nexport function tuiSmartSearch<T>(\n    getSearchFunction: (search: string) => Observable<readonly T[] | readonly T[][]>,\n    searchDebounceTimeMs: number = 400,\n): OperatorFunction<string, readonly T[] | readonly T[][] | null> {\n    return source =>\n        source.pipe(\n            debounceTime(searchDebounceTimeMs),\n            scan(\n                (previousSearched, current) =>\n                    previousSearched !== '' && current.startsWith(previousSearched)\n                        ? previousSearched\n                        : current,\n                '',\n            ),\n            distinctUntilChanged(),\n            switchMap(value => getSearchFunction(value).pipe(startWith(null))),\n            startWith(EMPTY_ARRAY),\n        );\n}\n","import {NgZone} from '@angular/core';\nimport {tuiZonefull} from '@taiga-ui/cdk';\nimport {OperatorFunction, pipe} from 'rxjs';\nimport {distinctUntilChanged, map} from 'rxjs/operators';\n\n/**\n * Works like regular map + distinctUntilChanged\n * and only returns to NgZone if value has changed\n *\n * @param project mapping function\n * @param zone NgZone instance\n */\nexport function tuiZonefulMap<T, R>(\n    project: (value: T, index: number) => R,\n    zone: NgZone,\n): OperatorFunction<T, R> {\n    return pipe(map(project), distinctUntilChanged(), tuiZonefull(zone));\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["debounceTime","scan","distinctUntilChanged","switchMap","startWith","EMPTY_ARRAY","pipe","map","tuiZonefull"],"mappings":";;;;;;IAUgB,SAAA,cAAc,CAC1B,iBAAgF,EAChF,oBAAkC,EAAA;IAAlC,IAAA,IAAA,oBAAA,KAAA,KAAA,CAAA,EAAA,EAAA,oBAAkC,GAAA,GAAA,CAAA,EAAA;IAElC,IAAA,OAAO,UAAA,MAAM,EACT,EAAA,OAAA,MAAM,CAAC,IAAI,CACPA,sBAAY,CAAC,oBAAoB,CAAC,EAClCC,cAAI,CACA,UAAC,gBAAgB,EAAE,OAAO,EACtB,EAAA,OAAA,gBAAgB,KAAK,EAAE,IAAI,OAAO,CAAC,UAAU,CAAC,gBAAgB,CAAC;IAC3D,UAAE,gBAAgB;IAClB,UAAE,OAAO,CAAA,EAAA,EACjB,EAAE,CACL,EACDC,8BAAoB,EAAE,EACtBC,mBAAS,CAAC,UAAA,KAAK,EAAI,EAAA,OAAA,iBAAiB,CAAC,KAAK,CAAC,CAAC,IAAI,CAACC,mBAAS,CAAC,IAAI,CAAC,CAAC,CAA9C,EAA8C,CAAC,EAClEA,mBAAS,CAACC,eAAW,CAAC,CACzB,CAAA,EAAA,CAAC;IACV;;ICvBA;;;;;;IAMG;IACa,SAAA,aAAa,CACzB,OAAuC,EACvC,IAAY,EAAA;IAEZ,IAAA,OAAOC,SAAI,CAACC,aAAG,CAAC,OAAO,CAAC,EAAEL,8BAAoB,EAAE,EAAEM,eAAW,CAAC,IAAI,CAAC,CAAC,CAAC;IACzE;;ICjBA;;IAEG;;;;;;;;;;;"}